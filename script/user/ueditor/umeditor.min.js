/*!
 * UEditor Mini版本
 * version: 1.0.0
 * build: Tue Sep 17 2013 15:57:30 GMT+0800 (CST)
 */
(function(){UMEDITOR_CONFIG=window.UMEDITOR_CONFIG||{};window.UM={plugins:{},commands:{},I18N:{},version:"1.0.0"};var g=UM.dom={};var j=UM.browser=function(){var u=navigator.userAgent.toLowerCase(),s=window.opera,t={ie:!!window.ActiveXObject,opera:(!!s&&s.version),webkit:(u.indexOf(" applewebkit/")>-1),mac:(u.indexOf("macintosh")>-1),quirks:(document.compatMode=="BackCompat")};t.gecko=(navigator.product=="Gecko"&&!t.webkit&&!t.opera);var r=0;if(t.ie){r=parseFloat(u.match(/msie (\d+)/)[1]);t.ie9Compat=document.documentMode==9;t.ie8=!!document.documentMode;t.ie8Compat=document.documentMode==8;t.ie7Compat=((r==7&&!document.documentMode)||document.documentMode==7);t.ie6Compat=(r<7||t.quirks);t.ie9above=r>8;t.ie9below=r<9}if(t.gecko){var v=u.match(/rv:([\d\.]+)/);if(v){v=v[1].split(".");r=v[0]*10000+(v[1]||0)*100+(v[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(u)){t.chrome=+RegExp["\x241"]}if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(u)&&!/chrome/i.test(u)){t.safari=+(RegExp["\x241"]||RegExp["\x242"])}if(t.opera){r=parseFloat(s.version())}if(t.webkit){r=parseFloat(u.match(/ applewebkit\/(\d+)/)[1])}t.version=r;t.isCompatible=!t.mobile&&((t.ie&&r>=6)||(t.gecko&&r>=10801)||(t.opera&&r>=9.5)||(t.air&&r>=1)||(t.webkit&&r>=522)||false);return t}();var c=j.ie,o=j.webkit,d=j.gecko,e=j.opera;var p=UM.utils={each:function(w,v,u){if(w==null){return}if(w.length===+w.length){for(var t=0,r=w.length;t<r;t++){if(v.call(u,w[t],t,w)===false){return false}}}else{for(var s in w){if(w.hasOwnProperty(s)){if(v.call(u,w[s],s,w)===false){return false}}}}},makeInstance:function(s){var r=new Function();r.prototype=s;s=new r;r.prototype=null;return s},extend:function(v,w,r){if(w){for(var u in w){if(!r||!v.hasOwnProperty(u)){v[u]=w[u]}}}return v},extend2:function(w){var s=arguments;for(var v=1;v<s.length;v++){var r=s[v];for(var u in r){if(!w.hasOwnProperty(u)){w[u]=r[u]}}}return w},inherits:function(u,s){var r=u.prototype,t=p.makeInstance(s.prototype);p.extend(t,r,true);u.prototype=t;return(t.constructor=u)},bind:function(s,r){return function(){return s.apply(r,arguments)}},defer:function(s,r,t){var u;return function(){if(t){clearTimeout(u)}u=setTimeout(s,r)}},indexOf:function(u,s,t){var r=-1;t=this.isNumber(t)?t:0;this.each(u,function(w,x){if(x>=t&&w===s){r=x;return false}});return r},removeItem:function(u,t){for(var s=0,r=u.length;s<r;s++){if(u[s]===t){u.splice(s,1);s--}}},trim:function(r){return r.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(t){if(!t){return{}}t=p.isArray(t)?t:t.split(",");for(var s=0,r,u={};r=t[s++];){u[r.toUpperCase()]=u[r]=1}return u},unhtml:function(s,r){return s?s.replace(r||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp);)?/g,function(u,t){if(t){return u}else{return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[u]}}):""},html:function(r){return r?r.replace(/&((g|l|quo)t|amp|#39);/g,function(s){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'"}[s]}):""},cssStyleToDomStyle:function(){var s=document.createElement("div").style,r={"float":s.cssFloat!=undefined?"cssFloat":s.styleFloat!=undefined?"styleFloat":"float"};return function(t){return r[t]||(r[t]=t.toLowerCase().replace(/-./g,function(u){return u.charAt(1).toUpperCase()}))}}(),loadFile:function(){var r=[];function s(x,w){try{for(var u=0,t;t=r[u++];){if(t.doc===x&&t.url==(w.src||w.href)){return t}}}catch(v){return null}}return function(z,y,v){var w=s(z,y);if(w){if(w.ready){v&&v()}else{w.funs.push(v)}return}r.push({doc:z,url:y.src||y.href,funs:[v]});if(!z.body){var u=[];for(var x in y){if(x=="tag"){continue}u.push(x+'="'+y[x]+'"')}z.write("<"+y.tag+" "+u.join(" ")+" ></"+y.tag+">");return}if(y.id&&z.getElementById(y.id)){return}var t=z.createElement(y.tag);delete y.tag;for(var x in y){t.setAttribute(x,y[x])}t.onload=t.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){w=s(z,y);if(w.funs.length>0){w.ready=1;for(var A;A=w.funs.pop();){A()}}t.onload=t.onreadystatechange=null}};t.onerror=function(){throw Error("The load "+(y.href||y.src)+" fails,check the url settings of file umeditor.config.js ")};z.getElementsByTagName("head")[0].appendChild(t)}}(),isEmptyObject:function(s){if(s==null){return true}if(this.isArray(s)||this.isString(s)){return s.length===0}for(var r in s){if(s.hasOwnProperty(r)){return false}}return true},fixColor:function(s,u){if(/color/i.test(s)&&/rgba?/.test(u)){var v=u.split(",");if(v.length>3){return""}u="#";for(var t=0,r;r=v[t++];){r=parseInt(r.replace(/[^\d]/gi,""),10).toString(16);u+=r.length==1?"0"+r:r}u=u.toUpperCase()}return u},clone:function(t,u){var s;u=u||{};for(var r in t){if(t.hasOwnProperty(r)){s=t[r];if(typeof s=="object"){u[r]=p.isArray(s)?[]:{};p.clone(t[r],u[r])}else{u[r]=s}}}return u},transUnitToPx:function(s){if(!/(pt|cm)/.test(s)){return s}var r;s.replace(/([\d.]+)(\w+)/,function(x,t,w){s=t;r=w});switch(r){case"cm":s=parseFloat(s)*25;break;case"pt":s=Math.round(parseFloat(s)*96/72)}return s+(s?"px":"")},domReady:function(){var r=[];function s(u){u.isReady=true;for(var t;t=r.pop();t()){}}return function(t,v){v=v||window;var u=v.document;t&&r.push(t);if(u.readyState==="complete"){s(u)}else{u.isReady&&s(u);if(j.ie){(function(){if(u.isReady){return}try{u.documentElement.doScroll("left")}catch(w){setTimeout(arguments.callee,0);return}s(u)})();v.attachEvent("onload",function(){s(u)})}else{u.addEventListener("DOMContentLoaded",function(){u.removeEventListener("DOMContentLoaded",arguments.callee,false);s(u)},false);v.addEventListener("load",function(){s(u)},false)}}}}(),cssRule:j.ie?function(u,v,w){var r,t;w=w||document;if(w.indexList){r=w.indexList}else{r=w.indexList={}}var s;if(!r[u]){if(v===undefined){return""}s=w.createStyleSheet("",t=w.styleSheets.length);r[u]=t}else{s=w.styleSheets[r[u]]}if(v===undefined){return s.cssText}s.cssText=v||""}:function(s,t,v){v=v||document;var r=v.getElementsByTagName("head")[0],u;if(!(u=v.getElementById(s))){if(t===undefined){return""}u=v.createElement("style");u.id=s;r.appendChild(u)}if(t===undefined){return u.innerHTML}if(t!==""){u.innerHTML=t}else{r.removeChild(u)}}};p.each(["String","Function","Array","Number","RegExp","Object"],function(r){UM.utils["is"+r]=function(s){return Object.prototype.toString.apply(s)=="[object "+r+"]"}});var i=UM.EventBase=function(){};i.prototype={addListener:function(s,u){s=p.trim(s).split(" ");for(var r=0,t;t=s[r++];){m(this,t,true).push(u)}},removeListener:function(s,u){s=p.trim(s).split(" ");for(var r=0,t;t=s[r++];){p.removeItem(m(this,t)||[],u)}},fireEvent:function(){var w=arguments[0];w=p.trim(w).split(" ");for(var v=0,y;y=w[v++];){var x=m(this,y),z,u,s;if(x){s=x.length;while(s--){if(!x[s]){continue}u=x[s].apply(this,arguments);if(u===true){return u}if(u!==undefined){z=u}}}if(u=this["on"+y.toLowerCase()]){z=u.apply(this,arguments)}}return z}};function m(u,s,t){var r;s=s.toLowerCase();return((r=(u.__allListeners||t&&(u.__allListeners={})))&&(r[s]||t&&(r[s]=[])))}var b=g.dtd=(function(){function an(B){for(var A in B){B[A.toUpperCase()]=B[A]}return B}var r=p.extend2;var am=an({isindex:1,fieldset:1}),al=an({input:1,button:1,select:1,textarea:1,label:1}),ak=r(an({a:1}),al),aj=r({iframe:1},ak),ai=an({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),ah=an({ins:1,del:1,script:1,style:1}),ag=r(an({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),ah),af=r(an({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),ag),ae=r(an({p:1}),af),ad=r(an({iframe:1}),af,al),ab=an({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),aa=r(an({a:0}),ad),Y=an({tr:1}),W=an({"#":1}),z=r(an({param:1}),ab),y=r(an({form:1}),am,aj,ai,ae),x=an({li:1,ol:1,ul:1}),w=an({style:1,script:1}),v=an({base:1,link:1,meta:1,title:1}),u=r(v,w),t=an({head:1,body:1}),s=an({html:1});var Z=an({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),ac=an({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return an({$nonBodyContent:r(s,t,v),$block:Z,$inline:aa,$inlineWithA:r(an({a:1}),aa),$body:r(an({script:1,style:1}),Z),$cdata:an({script:1,style:1}),$empty:ac,$nonChild:an({iframe:1,textarea:1}),$listItem:an({dd:1,dt:1,li:1}),$list:an({ul:1,ol:1,dl:1}),$isNotEmpty:an({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:an({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:an({p:1,div:1}),$tableContent:an({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:an({pre:1,script:1,style:1,textarea:1}),html:t,head:u,style:W,script:W,body:y,base:{},link:{},meta:{},title:W,col:{},tr:an({td:1,th:1}),img:{},embed:{},colgroup:an({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:y,td:y,br:{},th:y,center:y,kbd:aa,button:r(ae,ai),basefont:{},h5:aa,h4:aa,samp:aa,h6:aa,ol:x,h1:aa,h3:aa,option:W,h2:aa,form:r(am,aj,ai,ae),select:an({optgroup:1,option:1}),font:aa,ins:aa,menu:x,abbr:aa,label:aa,table:an({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:aa,tfoot:Y,cite:aa,li:y,input:{},iframe:y,strong:aa,textarea:W,noframes:y,big:aa,small:aa,span:an({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:aa,dt:aa,sub:aa,optgroup:an({option:1}),param:{},bdo:aa,"var":aa,div:y,object:z,sup:aa,dd:y,strike:aa,area:{},dir:x,map:r(an({area:1,form:1,p:1}),am,ah,ai),applet:z,dl:an({dt:1,dd:1}),del:aa,isindex:{},fieldset:r(an({legend:1}),ab),thead:Y,ul:x,acronym:aa,b:aa,a:r(an({a:1}),ad),blockquote:r(an({td:1,tr:1,tbody:1,li:1}),y),caption:aa,i:aa,u:aa,tbody:Y,s:aa,address:r(aj,ae),tt:aa,legend:aa,q:aa,pre:r(ag,ak),p:r(an({a:1}),aa),em:aa,dfn:aa})})();var n=c&&j.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},k=p.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]);var f=g.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:c&&j.version=="6"?"\ufeff":"\u200B",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},breakParent:function(v,t){var s,x=v,w=v,r,u;do{x=x.parentNode;if(r){s=x.cloneNode(false);s.appendChild(r);r=s;s=x.cloneNode(false);s.appendChild(u);u=s}else{r=x.cloneNode(false);u=r.cloneNode(false)}while(s=w.previousSibling){r.insertBefore(s,r.firstChild)}while(s=w.nextSibling){u.appendChild(s)}w=x}while(t!==x);s=t.parentNode;s.insertBefore(r,t);s.insertBefore(u,t);s.insertBefore(v,u);f.remove(t);return v},trimWhiteTextNode:function(s){function r(t){var u;while((u=s[t])&&u.nodeType==3&&f.isWhitespace(u)){s.removeChild(u)}}r("firstChild");r("lastChild")},getPosition:function(w,u){if(w===u){return 0}var s,v=[w],t=[u];s=w;while(s=s.parentNode){if(s===u){return 10}v.push(s)}s=u;while(s=s.parentNode){if(s===w){return 20}t.push(s)}v.reverse();t.reverse();if(v[0]!==t[0]){return 1}var r=-1;while(r++,v[r]===t[r]){}w=v[r];u=t[r];while(w=w.nextSibling){if(w===u){return 4}}return 2},getNodeIndex:function(t,s){var u=t,r=0;while(u=u.previousSibling){if(s&&u.nodeType==3){if(u.nodeType!=u.nextSibling.nodeType){r++}continue}r++}return r},inDoc:function(r,s){return f.getPosition(r,s)==10},findParent:function(s,t,r){if(s&&!f.isBody(s)){s=r?s:s.parentNode;while(s){if(!t||t(s)||f.isBody(s)){return t&&!t(s)&&f.isBody(s)?null:s}s=s.parentNode}}return null},findParentByTagName:function(t,r,s,u){r=p.listToMap(p.isArray(r)?r:[r]);return f.findParent(t,function(v){return r[v.tagName]&&!(u&&u(v))},s)},findParents:function(u,t,v,s){var r=t&&(v&&v(u)||!v)?[u]:[];while(u=f.findParent(u,v)){r.push(u)}return s?r:r.reverse()},insertAfter:function(s,r){return s.parentNode.insertBefore(r,s.nextSibling)},remove:function(s,t){var r=s.parentNode,u;if(r){if(t&&s.hasChildNodes()){while(u=s.firstChild){r.insertBefore(u,s)}}r.removeChild(s)}return s},isBookmarkNode:function(r){return r.nodeType==1&&r.id&&/^_baidu_bookmark_/i.test(r.id)},getWindow:function(r){var s=r.ownerDocument||r;return s.defaultView||s.parentWindow},split:function(u,w){var v=u.ownerDocument;if(j.ie&&w==u.nodeValue.length){var t=v.createTextNode("");return f.insertAfter(u,t)}var r=u.splitText(w);if(j.ie8){var s=v.createTextNode("");f.insertAfter(r,s);f.remove(s)}return r},isWhitespace:function(r){return !new RegExp("[^ \t\n\r"+f.fillChar+"]").test(r.nodeValue)},getXY:function(s){var r=0,t=0;while(s.offsetParent){t+=s.offsetTop;r+=s.offsetLeft;s=s.offsetParent}return{x:r,y:t}},on:function(v,x,w){var u=p.isArray(x)?x:[x],r=u.length;if(r){while(r--){x=u[r];if(v.addEventListener){v.addEventListener(x,w,false)}else{if(!w._d){w._d={els:[]}}var t=x+w.toString(),s=p.indexOf(w._d.els,v);if(!w._d[t]||s==-1){if(s==-1){w._d.els.push(v)}if(!w._d[t]){w._d[t]=function(y){return w.call(y.srcElement,y||window.event)}}v.attachEvent("on"+x,w._d[t])}}}}v=null},un:function(v,x,w){var u=p.isArray(x)?x:[x],r=u.length;if(r){while(r--){x=u[r];if(v.removeEventListener){v.removeEventListener(x,w,false)}else{var t=x+w.toString();try{v.detachEvent("on"+x,w._d?w._d[t]:w)}catch(y){}if(w._d&&w._d[t]){var s=p.indexOf(w._d.els,v);if(s!=-1){w._d.els.splice(s,1)}w._d.els.length==0&&delete w._d[t]}}}}},isEmptyInlineElement:function(r){if(r.nodeType!=1||!b.$removeEmpty[r.tagName]){return 0}r=r.firstChild;while(r){if(f.isBookmarkNode(r)){return 0}if(r.nodeType==1&&!f.isEmptyInlineElement(r)||r.nodeType==3&&!f.isWhitespace(r)){return 0}r=r.nextSibling}return 1},isBlockElm:function(r){return r.nodeType==1&&(b.$block[r.tagName]||k[f.getComputedStyle(r,"display")])&&!b.$nonChild[r.tagName]},getElementsByTagName:function(v,r,s){if(s&&p.isString(s)){var z=s;s=function(C){var B=false;$.each(p.trim(z).replace(/[ ]{2,}/g," ").split(" "),function(E,D){if($(C).hasClass(D)){B=true;return false}});return B}}r=p.trim(r).replace(/[ ]{2,}/g," ").split(" ");var x=[];for(var u=0,t;t=r[u++];){var y=v.getElementsByTagName(t);for(var w=0,A;A=y[w++];){if(!s||s(A)){x.push(A)}}}return x},unSelectable:c||j.opera?function(t){t.onselectstart=function(){return false};t.onclick=t.onkeyup=t.onkeydown=function(){return false};t.unselectable="on";t.setAttribute("unselectable","on");for(var s=0,r;r=t.all[s++];){switch(r.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:r.unselectable="on";t.setAttribute("unselectable","on")}}}:function(r){r.style.MozUserSelect=r.style.webkitUserSelect=r.style.KhtmlUserSelect="none"},removeAttributes:function(t,u){u=p.isArray(u)?u:p.trim(u).replace(/[ ]{2,}/g," ").split(" ");for(var s=0,r;r=u[s++];){r=n[r]||r;switch(r){case"className":t[r]="";break;case"style":t.style.cssText="";!j.ie&&t.removeAttributeNode(t.getAttributeNode("style"))}t.removeAttribute(r)}},createElement:function(t,r,s){return f.setAttributes(t.createElement(r),s)},setAttributes:function(t,s){for(var r in s){if(s.hasOwnProperty(r)){var u=s[r];switch(r){case"class":t.className=u;break;case"style":t.style.cssText=t.style.cssText+";"+u;break;case"innerHTML":t[r]=u;break;case"value":t.value=u;break;default:t.setAttribute(n[r]||r,u)}}}return t},getComputedStyle:function(s,r){return p.transUnitToPx(p.fixColor(r,$(s).css(r)))},preventDefault:function(r){r.preventDefault?r.preventDefault():(r.returnValue=false)},getStyle:function(s,r){var t=s.style[p.cssStyleToDomStyle(r)];return p.fixColor(r,t)},setStyle:function(s,r,t){s.style[p.cssStyleToDomStyle(r)]=t;if(!p.trim(s.style.cssText)){this.removeAttributes(s,"style")}},removeDirtyAttr:function(u){for(var t=0,s,r=u.getElementsByTagName("*");s=r[t++];){s.removeAttribute("_moz_dirty")}u.removeAttribute("_moz_dirty")},getChildCount:function(t,r){var s=0,u=t.firstChild;r=r||function(){return 1};while(u){if(r(u)){s++}u=u.nextSibling}return s},isEmptyNode:function(r){return !r.firstChild||f.getChildCount(r,function(s){return !f.isBr(s)&&!f.isBookmarkNode(s)&&!f.isWhitespace(s)})==0},isBr:function(r){return r.nodeType==1&&r.tagName=="BR"},isFillChar:function(r,s){return r.nodeType==3&&!r.nodeValue.replace(new RegExp((s?"^":"")+f.fillChar),"").length},isEmptyBlock:function(s,r){if(s.nodeType!=1){return 0}r=r||new RegExp("[ \t\r\n"+f.fillChar+"]","g");if(s[j.ie?"innerText":"textContent"].replace(r,"").length>0){return 0}for(var t in b.$isNotEmpty){if(s.getElementsByTagName(t).length){return 0}}return 1},isCustomeNode:function(r){return r.nodeType==1&&r.getAttribute("_ue_custom_node_")},fillNode:function(t,s){var r=j.ie?t.createTextNode(f.fillChar):t.createElement("br");s.innerHTML="";s.appendChild(r)},isBoundaryNode:function(t,r){var s;while(!f.isBody(t)){s=t;t=t.parentNode;if(s!==t[r]){return false}}return true},isFillChar:function(r,s){return r.nodeType==3&&!r.nodeValue.replace(new RegExp((s?"^":"")+f.fillChar),"").length}};var q=new RegExp(f.fillChar,"g");(function(){var w=0,x=f.fillChar,t;function s(B){B.collapsed=B.startContainer&&B.endContainer&&B.startContainer===B.endContainer&&B.startOffset==B.endOffset}function A(B){return !B.collapsed&&B.startContainer.nodeType==1&&B.startContainer===B.endContainer&&B.endOffset-B.startOffset==1}function r(C,D,E,B){if(D.nodeType==1&&(b.$empty[D.tagName]||b.$nonChild[D.tagName])){E=f.getNodeIndex(D)+(C?0:1);D=D.parentNode}if(C){B.startContainer=D;B.startOffset=E;if(!B.endContainer){B.collapse(true)}}else{B.endContainer=D;B.endOffset=E;if(!B.startContainer){B.collapse(false)}}s(B);return B}var u=g.Range=function(C,B){var D=this;D.startContainer=D.startOffset=D.endContainer=D.endOffset=null;D.document=C;D.collapsed=true;D.body=B};function v(E,B){try{if(t&&f.inDoc(t,E)){if(!t.nodeValue.replace(q,"").length){var C=t.parentNode;f.remove(t);while(C&&f.isEmptyInlineElement(C)&&(j.safari?!(f.getPosition(C,B)&f.POSITION_CONTAINS):!C.contains(B))){t=C.parentNode;f.remove(C);C=t}}else{t.nodeValue=t.nodeValue.replace(q,"")}}}catch(D){}}function z(D,B){var C;D=D[B];while(D&&f.isFillChar(D)){C=D[B];f.remove(D);D=C}}function y(H,L){var F=H.startContainer,E=H.endContainer,N=H.startOffset,G=H.endOffset,T=H.document,B=T.createDocumentFragment(),I,K;if(F.nodeType==1){F=F.childNodes[N]||(I=F.appendChild(T.createTextNode("")))}if(E.nodeType==1){E=E.childNodes[G]||(K=E.appendChild(T.createTextNode("")))}if(F===E&&F.nodeType==3){B.appendChild(T.createTextNode(F.substringData(N,G-N)));if(L){F.deleteData(N,G-N);H.collapse(true)}return B}var J,P,R=B,Q=f.findParents(F,true),C=f.findParents(E,true);for(var O=0;Q[O]==C[O];){O++}for(var M=O,S;S=Q[M];M++){J=S.nextSibling;if(S==F){if(!I){if(H.startContainer.nodeType==3){R.appendChild(T.createTextNode(F.nodeValue.slice(N)));if(L){F.deleteData(N,F.nodeValue.length-N)}}else{R.appendChild(!L?F.cloneNode(true):F)}}}else{P=S.cloneNode(false);R.appendChild(P)}while(J){if(J===E||J===C[M]){break}S=J.nextSibling;R.appendChild(!L?J.cloneNode(true):J);J=S}R=P}R=B;if(!Q[O]){R.appendChild(Q[O-1].cloneNode(false));R=R.firstChild}for(var M=O,D;D=C[M];M++){J=D.previousSibling;if(D==E){if(!K&&H.endContainer.nodeType==3){R.appendChild(T.createTextNode(E.substringData(0,G)));if(L){E.deleteData(0,G)}}}else{P=D.cloneNode(false);R.appendChild(P)}if(M!=O||!Q[O]){while(J){if(J===F){break}D=J.previousSibling;R.insertBefore(!L?J.cloneNode(true):J,R.firstChild);J=D}}R=P}if(L){H.setStartBefore(!C[O]?C[O-1]:!Q[O]?Q[O-1]:C[O]).collapse(true)}I&&f.remove(I);K&&f.remove(K);return B}u.prototype={deleteContents:function(){var B;if(!this.collapsed){y(this,1)}if(j.webkit){B=this.startContainer;if(B.nodeType==3&&!B.nodeValue.length){this.setStartBefore(B).collapse(true);f.remove(B)}}return this},inFillChar:function(){var B=this.startContainer;if(this.collapsed&&B.nodeType==3&&B.nodeValue.replace(new RegExp("^"+f.fillChar),"").length+1==B.nodeValue.length){return true}return false},setStart:function(B,C){return r(true,B,C,this)},setEnd:function(B,C){return r(false,B,C,this)},setStartAfter:function(B){return this.setStart(B.parentNode,f.getNodeIndex(B)+1)},setStartBefore:function(B){return this.setStart(B.parentNode,f.getNodeIndex(B))},setEndAfter:function(B){return this.setEnd(B.parentNode,f.getNodeIndex(B)+1)},setEndBefore:function(B){return this.setEnd(B.parentNode,f.getNodeIndex(B))},setStartAtFirst:function(B){return this.setStart(B,0)},setStartAtLast:function(B){return this.setStart(B,B.nodeType==3?B.nodeValue.length:B.childNodes.length)},setEndAtFirst:function(B){return this.setEnd(B,0)},setEndAtLast:function(B){return this.setEnd(B,B.nodeType==3?B.nodeValue.length:B.childNodes.length)},selectNode:function(B){return this.setStartBefore(B).setEndAfter(B)},selectNodeContents:function(B){return this.setStart(B,0).setEndAtLast(B)},cloneRange:function(){var B=this;return new u(B.document).setStart(B.startContainer,B.startOffset).setEnd(B.endContainer,B.endOffset)},collapse:function(B){var C=this;if(B){C.endContainer=C.startContainer;C.endOffset=C.startOffset}else{C.startContainer=C.endContainer;C.startOffset=C.endOffset}C.collapsed=true;return C},shrinkBoundary:function(D){var C=this,F,E=C.collapsed;function B(G){return G.nodeType==1&&!f.isBookmarkNode(G)&&!b.$empty[G.tagName]&&!b.$nonChild[G.tagName]}while(C.startContainer.nodeType==1&&(F=C.startContainer.childNodes[C.startOffset])&&B(F)){C.setStart(F,0)}if(E){return C.collapse(true)}if(!D){while(C.endContainer.nodeType==1&&C.endOffset>0&&(F=C.endContainer.childNodes[C.endOffset-1])&&B(F)){C.setEnd(F,F.childNodes.length)}}return C},trimBoundary:function(C){this.txtToElmBoundary();var G=this.startContainer,F=this.startOffset,E=this.collapsed,B=this.endContainer;if(G.nodeType==3){if(F==0){this.setStartBefore(G)}else{if(F>=G.nodeValue.length){this.setStartAfter(G)}else{var D=f.split(G,F);if(G===B){this.setEnd(D,this.endOffset-F)}else{if(G.parentNode===B){this.endOffset+=1}}this.setStartBefore(D)}}if(E){return this.collapse(true)}}if(!C){F=this.endOffset;B=this.endContainer;if(B.nodeType==3){if(F==0){this.setEndBefore(B)}else{F<B.nodeValue.length&&f.split(B,F);this.setEndAfter(B)}}}return this},txtToElmBoundary:function(B){function C(E,G){var D=E[G+"Container"],F=E[G+"Offset"];if(D.nodeType==3){if(!F){E["set"+G.replace(/(\w)/,function(H){return H.toUpperCase()})+"Before"](D)}else{if(F>=D.nodeValue.length){E["set"+G.replace(/(\w)/,function(H){return H.toUpperCase()})+"After"](D)}}}}if(B||!this.collapsed){C(this,"start");C(this,"end")}return this},insertNode:function(D){var F=D,C=1;if(D.nodeType==11){F=D.firstChild;C=D.childNodes.length}this.trimBoundary(true);var G=this.startContainer,E=this.startOffset;var B=G.childNodes[E];if(B){G.insertBefore(D,B)}else{G.appendChild(D)}if(F.parentNode===this.endContainer){this.endOffset=this.endOffset+C}return this.setStartBefore(F)},setCursor:function(C,B){return this.collapse(!C).select(B)},createBookmark:function(D,E){var B,C=this.document.createElement("span");C.style.cssText="display:none;line-height:0px;";C.appendChild(this.document.createTextNode("\u200D"));C.id="_baidu_bookmark_start_"+(E?"":w++);if(!this.collapsed){B=C.cloneNode(true);B.id="_baidu_bookmark_end_"+(E?"":w++)}this.insertNode(C);if(B){this.collapse().insertNode(B).setEndBefore(B)}this.setStartAfter(C);return{start:D?C.id:C,end:B?D?B.id:B:null,id:D}},moveToBookmark:function(C){var D=C.id?this.document.getElementById(C.start):C.start,B=C.end&&C.id?this.document.getElementById(C.end):C.end;this.setStartBefore(D);f.remove(D);if(B){this.setEndBefore(B);f.remove(B)}else{this.collapse(true)}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!f.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setStartAfter(this.startContainer)}while(!f.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setEndBefore(this.endContainer)}}return this},getClosedNode:function(){var C;if(!this.collapsed){var B=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(A(B)){var D=B.startContainer.childNodes[B.startOffset];if(D&&D.nodeType==1&&(b.$empty[D.tagName]||b.$nonChild[D.tagName])){C=D}}}return C},select:j.ie?function(C,L){var H;if(!this.collapsed){this.shrinkBoundary()}var D=this.getClosedNode();if(D&&!L){try{H=this.document.body.createControlRange();H.addElement(D);H.select()}catch(I){}return this}var J=this.createBookmark(),B=J.start,E;H=this.document.body.createTextRange();H.moveToElementText(B);H.moveStart("character",1);if(!this.collapsed){var G=this.document.body.createTextRange();E=J.end;G.moveToElementText(E);H.setEndPoint("EndToEnd",G)}else{if(!C&&this.startContainer.nodeType!=3){var K=this.document.createTextNode(x),F=this.document.createElement("span");F.appendChild(this.document.createTextNode(x));B.parentNode.insertBefore(F,B);B.parentNode.insertBefore(K,B);v(this.document,K);t=K;z(F,"previousSibling");z(B,"nextSibling");H.moveStart("character",-1);H.collapse(true)}}this.moveToBookmark(J);F&&f.remove(F);try{H.select()}catch(I){}return this}:function(B){function C(K){function J(M,N,L){if(M.nodeType==3&&M.nodeValue.length<N){K[L+"Offset"]=M.nodeValue.length}}J(K.startContainer,K.startOffset,"start");J(K.endContainer,K.endOffset,"end")}var G=f.getWindow(this.document),F=G.getSelection(),E;j.gecko?this.body.focus():G.focus();if(F){F.removeAllRanges();if(this.collapsed&&!B){var I=this.startContainer,H=I;if(I.nodeType==1){H=I.childNodes[this.startOffset]}if(!(I.nodeType==3&&this.startOffset)&&(H?(!H.previousSibling||H.previousSibling.nodeType!=3):(!I.lastChild||I.lastChild.nodeType!=3))){E=this.document.createTextNode(x);this.insertNode(E);v(this.document,E);z(E,"previousSibling");z(E,"nextSibling");t=E;this.setStart(E,j.webkit?1:0).collapse(true)}}var D=this.document.createRange();if(this.collapsed&&j.opera&&this.startContainer.nodeType==1){var H=this.startContainer.childNodes[this.startOffset];if(!H){H=this.startContainer.lastChild;if(H&&f.isBr(H)){this.setStartBefore(H).collapse(true)}}else{while(H&&f.isBlockElm(H)){if(H.nodeType==1&&H.childNodes[0]){H=H.childNodes[0]}else{break}}H&&this.setStartBefore(H).collapse(true)}}C(this);D.setStart(this.startContainer,this.startOffset);D.setEnd(this.endContainer,this.endOffset);F.addRange(D)}return this},createAddress:function(E,D){var F={},C=this;function B(G){var I=G?C.startContainer:C.endContainer;var N=f.findParents(I,true,function(P){return !f.isBody(P)}),M=[];for(var K=0,O;O=N[K++];){M.push(f.getNodeIndex(O,D))}var H=0;if(D){if(I.nodeType==3){var J=I.previousSibling;while(J&&J.nodeType==3){H+=J.nodeValue.replace(q,"").length;J=J.previousSibling}H+=(G?C.startOffset:C.endOffset)}else{I=I.childNodes[G?C.startOffset:C.endOffset];if(I){H=f.getNodeIndex(I,D)}else{I=G?C.startContainer:C.endContainer;var L=I.firstChild;while(L){if(f.isFillChar(L)){L=L.nextSibling;continue}H++;if(L.nodeType==3){while(L&&L.nodeType==3){L=L.nextSibling}}else{L=L.nextSibling}}}}}else{H=G?f.isFillChar(I)?0:C.startOffset:C.endOffset}if(H<0){H=0}M.push(H);return M}F.startAddress=B(true);if(!E){F.endAddress=C.collapsed?[].concat(F.startAddress):B()}return F},moveToAddress:function(E,C){var B=this;function D(I,H){var L=B.body,F,M;for(var K=0,J,G=I.length;K<G;K++){J=I[K];F=L;L=L.childNodes[J];if(!L){M=J;break}}if(H){if(L){B.setStartBefore(L)}else{B.setStart(F,M)}}else{if(L){B.setEndBefore(L)}else{B.setEnd(F,M)}}}D(E.startAddress,true);!C&&E.endAddress&&D(E.endAddress);return B},equals:function(B){for(var C in this){if(this.hasOwnProperty(C)){if(this[C]!==B[C]){return false}}}return true},scrollIntoView:function(){var C=$('<span style="padding:0;margin:0;display:block;border:0">&nbsp;</span>');this.cloneRange().insertNode(C.get(0));var D=$(window).scrollTop(),B=$(window).height(),E=C.offset().top;if(E<D-B||E>D+B){if(E>D+B){window.scrollTo(0,E-B+C.height())}else{window.scrollTo(0,D-E)}}C.remove()}}})();(function(){function u(E,w){var x=f.getNodeIndex;E=E.duplicate();E.collapse(w);var I=E.parentElement();if(!I.hasChildNodes()){return{container:I,offset:0}}var H=I.children,y,A=E.duplicate(),J=0,D=H.length-1,F=-1,v;while(J<=D){F=Math.floor((J+D)/2);y=H[F];A.moveToElementText(y);var C=A.compareEndPoints("StartToStart",E);if(C>0){D=F-1}else{if(C<0){J=F+1}else{return{container:I,offset:x(y)}}}}if(F==-1){A.moveToElementText(I);A.setEndPoint("StartToStart",E);v=A.text.replace(/(\r\n|\r)/g,"\n").length;H=I.childNodes;if(!v){y=H[H.length-1];return{container:y,offset:y.nodeValue.length}}var B=H.length;while(v>0){v-=H[--B].nodeValue.length}return{container:H[B],offset:-v}}A.collapse(C>0);A.setEndPoint(C>0?"StartToStart":"EndToStart",E);v=A.text.replace(/(\r\n|\r)/g,"\n").length;if(!v){return b.$empty[y.tagName]||b.$nonChild[y.tagName]?{container:I,offset:x(y)+(C>0?0:1)}:{container:y,offset:C>0?0:y.childNodes.length}}while(v>0){try{var z=y;y=y[C>0?"previousSibling":"nextSibling"];v-=y.nodeValue.length}catch(G){return{container:I,offset:x(z)}}}return{container:y,offset:C>0?-v:y.nodeValue.length+v}}function t(x,w){if(x.item){w.selectNode(x.item(0))}else{var v=u(x,true);w.setStart(v.container,v.offset);if(x.compareEndPoints("StartToEnd",x)!=0){v=u(x,false);w.setEnd(v.container,v.offset)}}return w}function s(y,v){var x;try{x=y.getNative(v).createRange()}catch(z){return null}var w=x.item?x.item(0):x.parentElement();if((w.ownerDocument||w)===y.document){return x}return null}var r=g.Selection=function(x,v){var w=this;w.document=x;w.body=v;if(j.ie9below){f.on(v,"beforedeactivate",function(){w._bakIERange=w.getIERange()});f.on(v,"activate",function(){try{var y=s(w);if((!y||!w.rangeInBody(y))&&w._bakIERange){w._bakIERange.select()}}catch(z){}w._bakIERange=null})}};r.prototype={hasNativeRange:function(){var v;if(!j.ie||j.ie9above){var w=this.getNative();if(!w.rangeCount){return false}v=w.getRangeAt(0)}else{v=s(this)}return this.rangeInBody(v)},getNative:function(v){var x=this.document;try{return !x?null:j.ie9below||v?x.selection:f.getWindow(x).getSelection()}catch(w){return null}},getIERange:function(v){var w=s(this,v);if(!w||!this.rangeInBody(w,v)){if(this._bakIERange){return this._bakIERange}}return w},rangeInBody:function(v,w){var x=j.ie9below||w?v.item?v.item():v.parentElement():v.startContainer;return x===this.body||f.inDoc(x,this.body)},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath){return this._cachedStartElementPath}var v=this.getStart();if(v){return f.findParents(v,true,null,true)}return[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){return this.hasNativeRange()},getRange:function(){var y=this;function x(D){var F=y.body.firstChild,E=D.collapsed;while(F&&F.firstChild){D.setStart(F,0);F=F.firstChild}if(!D.startContainer){D.setStart(y.body,0)}if(E){D.collapse(true)}}if(y._cachedRange!=null){return this._cachedRange}var w=new g.Range(y.document,y.body);if(j.ie9below){var A=y.getIERange();if(A&&this.rangeInBody(A)){try{t(A,w)}catch(B){x(w)}}else{x(w)}}else{var z=y.getNative();if(z&&z.rangeCount&&y.rangeInBody(z.getRangeAt(0))){var v=z.getRangeAt(0);var C=z.getRangeAt(z.rangeCount-1);w.setStart(v.startContainer,v.startOffset).setEnd(C.endContainer,C.endOffset);if(w.collapsed&&f.isBody(w.startContainer)&&!w.startOffset){x(w)}}else{if(this._bakRange&&(this._bakRange.startContainer===this.body||f.inDoc(this._bakRange.startContainer,this.body))){return this._bakRange}x(w)}}return this._bakRange=w},getStart:function(){if(this._cachedStartElement){return this._cachedStartElement}var v=j.ie9below?this.getIERange():this.getRange(),y,z,w,x;if(j.ie9below){if(!v){return this.document.body.firstChild}if(v.item){return v.item(0)}y=v.duplicate();y.text.length>0&&y.moveStart("character",1);y.collapse(1);z=y.parentElement();x=w=v.parentElement();while(w=w.parentNode){if(w==z){z=x;break}}}else{z=v.startContainer;if(z.nodeType==1&&z.hasChildNodes()){z=z.childNodes[Math.min(z.childNodes.length-1,v.startOffset)]}if(z.nodeType==3){return z.parentNode}}return z},getText:function(){var v,w;if(this.isFocus()&&(v=this.getNative())){w=j.ie9below?v.createRange():v.getRangeAt(0);return j.ie9below?w.text:w.toString()}return""}}})();(function(){var u=0,s;function w(C,B){var x;if(B.textarea){if(p.isString(B.textarea)){for(var z=0,A,y=f.getElementsByTagName(C,"textarea");A=y[z++];){if(A.id=="umeditor_textarea_"+B.options.textarea){x=A;break}}}else{x=B.textarea}}if(!x){C.appendChild(x=f.createElement(document,"textarea",{name:B.options.textarea,id:"umeditor_textarea_"+B.options.textarea,style:"display:none"}));B.textarea=x}x.value=B.hasContents()?(B.options.allHtmlEnabled?B.getAllHtml():B.getContent(null,null,true)):""}function t(x){for(var y in UM.plugins){UM.plugins[y].call(x)}x.langIsReady=true;x.fireEvent("langReady")}function v(x){for(var y in x){return y}}var r=UM.Editor=function(x){var y=this;y.uid=u++;i.call(y);y.commands={};y.options=p.extend(p.clone(x||{}),UMEDITOR_CONFIG,true);y.shortcutkeys={};y.inputRules=[];y.outputRules=[];y.setOpt({isShow:true,initialContent:"",initialStyle:"",autoClearinitialContent:false,textarea:"editorValue",focus:false,focusInEnd:true,autoClearEmptyNode:true,fullscreen:false,readonly:false,zIndex:90,enterTag:"p",lang:"zh-cn",langPath:y.options.UMEDITOR_HOME_URL+"lang/",theme:"default",themePath:y.options.UMEDITOR_HOME_URL+"themes/",allHtmlEnabled:false,autoSyncData:true,autoHeightEnabled:true});if(!p.isEmptyObject(UM.I18N)){y.options.lang=v(UM.I18N);t(y)}else{p.loadFile(document,{src:y.options.langPath+y.options.lang+"/"+y.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){t(y)})}};r.prototype={ready:function(x){var y=this;if(x){y.isReady?x.apply(y):y.addListener("ready",x)}},setOpt:function(x,z){var y={};if(p.isString(x)){y[x]=z}else{y=x}p.extend(this.options,y,true)},getOpt:function(x){return this.options[x]||""},destroy:function(){var z=this;z.fireEvent("destroy");var y=z.container.parentNode;if(y===document.body){y=z.container}var x=z.textarea;if(!x){x=document.createElement("textarea");y.parentNode.insertBefore(x,y)}else{x.style.display=""}x.style.width=z.body.offsetWidth+"px";x.style.height=z.body.offsetHeight+"px";x.value=z.getContent();x.id=z.key;if(y.contains(x)){$(x).insertBefore(y)}y.innerHTML="";f.remove(y);UM.clearCache(z.id);for(var A in z){if(z.hasOwnProperty(A)){delete this[A]}}},initialCont:function(y){if(y){y.getAttribute("name")&&(this.options.textarea=y.getAttribute("name"));if(y&&/script|textarea/ig.test(y.tagName)){var x=document.createElement("div");y.parentNode.insertBefore(x,y);this.options.initialContent=UM.htmlparser(y.value||y.innerHTML||this.options.initialContent).toHtml();y.className&&(x.className=y.className);y.style.cssText&&(x.style.cssText=y.style.cssText);if(/textarea/i.test(y.tagName)){this.textarea=y;this.textarea.style.display="none"}else{y.parentNode.removeChild(y);y.id&&(x.id=y.id)}y=x;y.innerHTML=""}return y}else{return null}},render:function(y){var B=this,z=B.options,A=function(C){return parseInt($(y).css(C))};if(p.isString(y)){y=document.getElementById(y)}if(y){this.id=y.getAttribute("id");UM.setEditor(this);p.cssRule("umeditor_body_css",B.options.initialStyle,document);y=this.initialCont(y);y.className+=" edui-body-container";if(z.initialFrameWidth){z.minFrameWidth=z.initialFrameWidth}else{z.minFrameWidth=z.initialFrameWidth=$(y).width()||UM.defaultWidth}if(z.initialFrameHeight){z.minFrameHeight=z.initialFrameHeight}else{z.initialFrameHeight=z.minFrameHeight=$(y).height()||UM.defaultHeight}y.style.width=/%$/.test(z.initialFrameWidth)?"100%":z.initialFrameWidth-A("padding-left")-A("padding-right")+"px";var x=/%$/.test(z.initialFrameHeight)?"100%":(z.initialFrameHeight-A("padding-top")-A("padding-bottom"));if(this.options.autoHeightEnabled){y.style.minHeight=x+"px";y.style.height="";if(j.ie&&j.version<=6){y.style.height=x;y.style.setExpression("height","this.scrollHeight <= "+x+' ? "'+x+'px" : "auto"')}}else{$(y).height(x)}y.style.zIndex=z.zIndex;this._setup(y)}},_setup:function(x){var B=this,y=B.options;x.contentEditable=true;document.body.spellcheck=false;B.document=document;B.window=document.defaultView||document.parentWindow;B.body=x;B.$body=$(x);f.isBody=function(D){return D===x};B.selection=new g.Selection(document,B.body);var C;if(j.gecko&&(C=this.selection.getNative())){C.removeAllRanges()}this._initEvents();for(var A=x.parentNode;A&&!f.isBody(A);A=A.parentNode){if(A.tagName=="FORM"){B.form=A;if(B.options.autoSyncData){f.on(x,"blur",function(){w(A,B)})}else{f.on(A,"submit",function(){w(this,B)})}break}}if(y.initialContent){if(y.autoClearinitialContent){var z=B.execCommand;B.execCommand=function(){B.fireEvent("firstBeforeExecCommand");return z.apply(B,arguments)};this._setDefaultContent(y.initialContent)}else{this.setContent(y.initialContent,false,true)}}if(f.isEmptyNode(B.body)){B.body.innerHTML="<p>"+(j.ie?"":"<br/>")+"</p>"}if(y.focus){setTimeout(function(){B.focus(B.options.focusInEnd);!B.options.autoClearinitialContent&&B._selectionChange()},0)}if(!B.container){B.container=x.parentNode}B._bindshortcutKeys();B.isReady=1;B.fireEvent("ready");y.onready&&y.onready.call(B);if(!j.ie||j.ie9above){f.on(B.body,["blur","focus"],function(E){var D=B.selection.getNative();if(E.type=="blur"){if(D.rangeCount>0){B._bakRange=D.getRangeAt(0)}}else{try{B._bakRange&&D.addRange(B._bakRange)}catch(E){}B._bakRange=null}})}!y.isShow&&B.setHide();y.readonly&&B.setDisabled()},sync:function(z){var y=this,x=z?document.getElementById(z):f.findParent(y.body.parentNode,function(A){return A.tagName=="FORM"},true);x&&w(x,y)},setHeight:function(x,y){!y&&(this.options.initialFrameHeight=x);if(this.options.autoHeightEnabled){$(this.body).css({"min-height":x+"px"});if(j.ie&&j.version<=6&&this.container){this.container.style.height=x;this.container.style.setExpression("height","this.scrollHeight <= "+x+' ? "'+x+'px" : "auto"')}}else{$(this.body).height(x)}},setWidth:function(x){this.$container&&this.$container.width(x);$(this.body).width(x-$(this.body).css("padding-left").replace("px","")*1-$(this.body).css("padding-right").replace("px","")*1)},addshortcutkey:function(y,x){var z={};if(x){z[y]=x}else{z=y}p.extend(this.shortcutkeys,z)},_bindshortcutKeys:function(){var y=this,x=this.shortcutkeys;y.addListener("keydown",function(E,D){var G=D.keyCode||D.which;for(var B in x){var C=x[B].split(",");for(var H=0,z;z=C[H++];){z=z.split(":");var F=z[0],A=z[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(F.toLowerCase())||/^(\d+)$/.test(F)){if(((RegExp.$1=="ctrl"?(D.ctrlKey||D.metaKey):0)&&(RegExp.$2!=""?D[RegExp.$2.slice(1)+"Key"]:1)&&G==RegExp.$3)||G==RegExp.$1){if(y.queryCommandState(B,A)!=-1){y.execCommand(B,A)}f.preventDefault(D)}}}}})},getContent:function(D,B,y,A,z){var C=this;if(D&&p.isFunction(D)){B=D;D=""}if(B?!B():!this.hasContents()){return""}C.fireEvent("beforegetcontent");var x=UM.htmlparser(C.body.innerHTML,A);C.filterOutputRule(x);C.fireEvent("aftergetcontent",x);return x.toHtml(z)},getAllHtml:function(){var z=this,y=[],x="";z.fireEvent("getAllHtml",y);if(j.ie&&j.version>8){var A="";p.each(z.document.styleSheets,function(B){A+=(B.href?'<link rel="stylesheet" type="text/css" href="'+B.href+'" />':"<style>"+B.cssText+"</style>")});p.each(z.document.getElementsByTagName("script"),function(B){A+=B.outerHTML})}return"<html><head>"+(z.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+z.options.charset+'"/>':"")+(A||z.document.getElementsByTagName("head")[0].innerHTML)+y.join("\n")+"</head><body "+(c&&j.version<9?'class="view"':"")+">"+z.getContent(null,null,true)+"</body></html>"},getPlainTxt:function(){var y=new RegExp(f.fillChar,"g"),x=this.body.innerHTML.replace(/[\n\r]/g,"");x=x.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(A,z,B){return b.$block[B]?"\n":z?z:""});return x.replace(y,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var x=new RegExp(f.fillChar,"g");return this.body[j.ie?"innerText":"textContent"].replace(x,"").replace(/\u00a0/g," ")},setContent:function(B,E,A){var F=this;F.fireEvent("beforesetcontent",B);var G=UM.htmlparser(B);F.filterInputRule(G);B=G.toHtml();F.body.innerHTML=(E?F.body.innerHTML:"")+B;function D(H){return H.tagName=="DIV"&&H.getAttribute("cdata_tag")}if(F.options.enterTag=="p"){var y=this.body.firstChild,z;if(!y||y.nodeType==1&&(b.$cdata[y.tagName]||D(y)||f.isCustomeNode(y))&&y===this.body.lastChild){this.body.innerHTML="<p>"+(j.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML}else{var x=F.document.createElement("p");while(y){while(y&&(y.nodeType==3||y.nodeType==1&&b.p[y.tagName]&&!b.$cdata[y.tagName])){z=y.nextSibling;x.appendChild(y);y=z}if(x.firstChild){if(!y){F.body.appendChild(x);break}else{y.parentNode.insertBefore(x,y);x=F.document.createElement("p")}}y=y.nextSibling}}}F.fireEvent("aftersetcontent");F.fireEvent("contentchange");!A&&F._selectionChange();F._bakRange=F._bakIERange=F._bakNativeRange=null;var C;if(j.gecko&&(C=this.selection.getNative())){C.removeAllRanges()}if(F.options.autoSyncData){F.form&&w(F.form,F)}},focus:function(A){try{var y=this,x=y.selection.getRange();if(A){x.setStartAtLast(y.body.lastChild).setCursor(false,true)}else{x.select(true)}this.fireEvent("focus")}catch(z){}},blur:function(){var x=this.selection.getNative();x.empty?x.empty():x.removeAllRanges();this.fireEvent("blur")},isFocus:function(){return this.selection.isFocus()},_initEvents:function(){var y=this,x=y.body;y._proxyDomEvent=p.bind(y._proxyDomEvent,y);f.on(x,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],y._proxyDomEvent);f.on(x,["focus","blur"],y._proxyDomEvent);f.on(x,["mouseup","keydown"],function(z){if(z.type=="keydown"&&(z.ctrlKey||z.metaKey||z.shiftKey||z.altKey)){return}if(z.button==2){return}y._selectionChange(250,z)})},_proxyDomEvent:function(x){return this.fireEvent(x.type.replace(/^on/,""),x)},_selectionChange:function(A,x){var D=this;var C=false;var B,z;if(j.ie&&j.version<9&&x&&x.type=="mouseup"){var y=this.selection.getRange();if(!y.collapsed){C=true;B=x.clientX;z=x.clientY}}clearTimeout(s);s=setTimeout(function(){if(!D.selection.getNative()){return}var F;if(C&&D.selection.getNative().type=="None"){F=D.document.body.createTextRange();try{F.moveToPoint(B,z)}catch(E){F=null}}var G;if(F){G=D.selection.getIERange;D.selection.getIERange=function(){return F}}D.selection.cache();if(G){D.selection.getIERange=G}if(D.selection._cachedRange&&D.selection._cachedStartElement){D.fireEvent("beforeselectionchange");D.fireEvent("selectionchange",!!x);D.fireEvent("afterselectionchange");D.selection.clear()}},A||50)},_callCmdFn:function(B,y){y=Array.prototype.slice.call(y,0);var x=y.shift().toLowerCase(),A,z;A=this.commands[x]||UM.commands[x];z=A&&A[B];if((!A||!z)&&B=="queryCommandState"){return 0}else{if(z){return z.apply(this,[x].concat(y))}}},execCommand:function(y){if(!this.isFocus()){var B=this.selection._bakRange;if(B){B.select()}else{this.focus(true)}}y=y.toLowerCase();var z=this,x,A=z.commands[y]||UM.commands[y];if(!A||!A.execCommand){return null}if(!A.notNeedUndo&&!z.__hasEnterExecCommand){z.__hasEnterExecCommand=true;if(z.queryCommandState.apply(z,arguments)!=-1){z.fireEvent("beforeexeccommand",y);x=this._callCmdFn("execCommand",arguments);!z._ignoreContentChange&&z.fireEvent("contentchange");z.fireEvent("afterexeccommand",y)}z.__hasEnterExecCommand=false}else{x=this._callCmdFn("execCommand",arguments);!z._ignoreContentChange&&z.fireEvent("contentchange")}!z._ignoreContentChange&&z._selectionChange();return x},queryCommandState:function(x){try{return this._callCmdFn("queryCommandState",arguments)}catch(y){return 0}},queryCommandValue:function(x){try{return this._callCmdFn("queryCommandValue",arguments)}catch(y){return null}},hasContents:function(y){if(y){for(var A=0,z;z=y[A++];){if(this.body.getElementsByTagName(z).length>0){return true}}}if(!f.isEmptyBlock(this.body)){return true}y=["div"];for(A=0;z=y[A++];){var x=f.getElementsByTagName(this.body,z);for(var C=0,B;B=x[C++];){if(f.isCustomeNode(B)){return true}}}return false},reset:function(){this.fireEvent("reset")},setEnabled:function(){var y=this,x;if(y.body.contentEditable=="false"){y.body.contentEditable=true;x=y.selection.getRange();try{x.moveToBookmark(y.lastBk);delete y.lastBk}catch(z){x.setStartAtFirst(y.body).collapse(true)}x.select(true);if(y.bkqueryCommandState){y.queryCommandState=y.bkqueryCommandState;delete y.bkqueryCommandState}y.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(x){var y=this;x=x?p.isArray(x)?x:[x]:[];if(y.body.contentEditable=="true"){if(!y.lastBk){y.lastBk=y.selection.getRange().createBookmark(true)}y.body.contentEditable=false;y.bkqueryCommandState=y.queryCommandState;y.queryCommandState=function(z){if(p.indexOf(x,z)!=-1){return y.bkqueryCommandState.apply(y,arguments)}return -1};y.fireEvent("selectionchange")}},disable:function(x){return this.setDisabled(x)},_setDefaultContent:function(){function x(){var y=this;if(y.document.getElementById("initContent")){y.body.innerHTML="<p>"+(c?"":"<br/>")+"</p>";y.removeListener("firstBeforeExecCommand focus",x);setTimeout(function(){y.focus();y._selectionChange()},0)}}return function(y){var z=this;z.body.innerHTML='<p id="initContent">'+y+"</p>";z.addListener("firstBeforeExecCommand focus",x)}}(),setShow:function(){var y=this,x=y.selection.getRange();if(y.container.style.display=="none"){try{x.moveToBookmark(y.lastBk);delete y.lastBk}catch(z){x.setStartAtFirst(y.body).collapse(true)}setTimeout(function(){x.select(true)},100);y.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var x=this;if(!x.lastBk){x.lastBk=x.selection.getRange().createBookmark(true)}x.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(z){var A=UM.I18N[this.options.lang];if(!A){throw Error("not import language file")}z=(z||"").split(".");for(var y=0,x;x=z[y++];){A=A[x];if(!A){break}}return A},getContentLength:function(y,x){var B=this.getContent(false,false,true).length;if(y){x=(x||[]).concat(["hr","img","iframe"]);B=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var A=0,z;z=x[A++];){B+=this.body.getElementsByTagName(z).length}}return B},addInputRule:function(x,y){x.ignoreUndo=y;this.inputRules.push(x)},filterInputRule:function(y,x){for(var A=0,z;z=this.inputRules[A++];){if(x&&z.ignoreUndo){continue}z.call(this,y)}},addOutputRule:function(x,y){x.ignoreUndo=y;this.outputRules.push(x)},filterOutputRule:function(y,x){for(var A=0,z;z=this.outputRules[A++];){if(x&&z.ignoreUndo){continue}z.call(this,y)}}};p.inherits(r,i)})();var h=UM.filterWord=function(){function t(u){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<v:)/ig.test(u)}function r(u){u=u.replace(/[\d.]+\w+/g,function(v){return p.transUnitToPx(v)});return u}function s(u){return u.replace(/[\t\r\n]+/g,"").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(z){if(j.opera){return""}try{var w=z.match(/width:([ \d.]*p[tx])/i)[1],v=z.match(/height:([ \d.]*p[tx])/i)[1],y=z.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+r(w)+'" height="'+r(v)+'" src="'+y+'" />'}catch(x){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(y,v,w,x){return v=="class"&&x=="MsoListParagraph"?y:""}).replace(/<(font|span)[^>]*>\s*<\/\1>/gi,"").replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(C,G,A,x){var y=[],F=x.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").split(/;\s*/g);for(var B=0,E;E=F[B];B++){var w,D,z=E.split(":");if(z.length==2){w=z[0].toLowerCase();D=z[1].toLowerCase();if(/^(background)\w*/.test(w)&&D.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(w)&&/^0\w+$/.test(D)){continue}switch(w){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":if(!/<table/.test(G)){y[B]=w.replace(/^mso-|-alt$/g,"")+":"+r(D)}continue;case"horiz-align":y[B]="text-align:"+D;continue;case"vert-align":y[B]="vertical-align:"+D;continue;case"font-color":case"mso-foreground":y[B]="color:"+D;continue;case"mso-background":case"mso-highlight":y[B]="background:"+D;continue;case"mso-default-height":y[B]="min-height:"+r(D);continue;case"mso-default-width":y[B]="min-width:"+r(D);continue;case"mso-padding-between-alt":y[B]="border-collapse:separate;border-spacing:"+r(D);continue;case"text-line-through":if((D=="single")||(D=="double")){y[B]="text-decoration:line-through"}continue;case"mso-zero-height":if(D=="yes"){y[B]="display:none"}continue;case"background":break;case"margin":if(!/[1-9]/.test(D)){continue}}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(w)||/text\-indent|padding|margin/.test(w)&&/\-[\d.]+/.test(D)){continue}y[B]=w+":"+z[1]}}return G+(y.length?' style="'+y.join(";").replace(/;{2,}/g,";")+'"':"")}).replace(/[\d.]+(cm|pt)/g,function(v){return p.transUnitToPx(v)})}return function(u){return(t(u)?s(u):u)}}();(function(){var v=UM.uNode=function(D){this.type=D.type;this.data=D.data;this.tagName=D.tagName;this.parentNode=D.parentNode;this.attrs=D.attrs||{};this.children=D.children};var z="    ",y="\n";function t(D,F,E){D.push(y);return F+(E?1:-1)}function C(D,F){for(var E=0;E<F;E++){D.push(z)}}v.createElement=function(D){if(/[<>]/.test(D)){return UM.htmlparser(D).children[0]}else{return new v({type:"element",children:[],tagName:D})}};v.createText=function(E,D){return new UM.uNode({type:"text",data:D?E:p.unhtml(E||"")})};function A(H,D,G,I){switch(H.type){case"root":for(var F=0,E;E=H.children[F++];){if(G&&E.type=="element"&&!b.$inlineWithA[E.tagName]&&F>1){t(D,I,true);C(D,I)}A(E,D,G,I)}break;case"text":w(H,D);break;case"element":x(H,D,G,I);break;case"comment":B(H,D,G)}return D}function w(E,D){D.push(E.parentNode.tagName=="pre"?E.data:E.data.replace(/[ ]{2}/g," &nbsp;"))}function x(D,F,J,G){var H="";if(D.attrs){H=[];var K=D.attrs;for(var I in K){H.push(I+(K[I]!==undefined?'="'+K[I]+'"':""))}H=H.join(" ")}F.push("<"+D.tagName+(H?" "+H:"")+(b.$empty[D.tagName]?"/":"")+">");if(J&&!b.$inlineWithA[D.tagName]&&D.tagName!="pre"){if(D.children&&D.children.length){G=t(F,G,true);C(F,G)}}if(D.children&&D.children.length){for(var E=0,L;L=D.children[E++];){if(J&&L.type=="element"&&!b.$inlineWithA[L.tagName]&&E>1){t(F,G);C(F,G)}A(L,F,J,G)}}if(!b.$empty[D.tagName]){if(J&&!b.$inlineWithA[D.tagName]&&D.tagName!="pre"){if(D.children&&D.children.length){G=t(F,G);C(F,G)}}F.push("</"+D.tagName+">")}}function B(E,D){D.push("<!--"+E.data+"-->")}function u(D,H){var G;if(D.type=="element"&&D.getAttr("id")==H){return D}if(D.children&&D.children.length){for(var F=0,E;E=D.children[F++];){if(G=u(E,H)){return G}}}}function s(H,G,D){if(H.type=="element"&&H.tagName==G){D.push(H)}if(H.children&&H.children.length){for(var F=0,E;E=H.children[F++];){s(E,G,D)}}}function r(D,G){if(D.children&&D.children.length){for(var F=0,E;E=D.children[F];){r(E,G);if(E.parentNode){if(E.children&&E.children.length){G(E)}if(E.parentNode){F++}}}}else{G(D)}}v.prototype={toHtml:function(E){var D=[];A(this,D,E,0);return D.join("")},innerHTML:function(E){if(this.type!="element"||b.$empty[this.tagName]){return this}if(p.isString(E)){if(this.children){for(var G=0,F;F=this.children[G++];){F.parentNode=null}}this.children=[];var D=UM.htmlparser(E);for(var G=0,F;F=D.children[G++];){this.children.push(F);F.parentNode=this}return this}else{var D=new UM.uNode({type:"root",children:this.children});return D.toHtml()}},innerText:function(D,E){if(this.type!="element"||b.$empty[this.tagName]){return this}if(D){if(this.children){for(var G=0,F;F=this.children[G++];){F.parentNode=null}}this.children=[];this.appendChild(v.createText(D,E));return this}else{return this.toHtml().replace(/<[^>]+>/g,"")}},getData:function(){if(this.type=="element"){return""}return this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var F=this.parentNode;for(var E=0,D;D=F.children[E];E++){if(D===this){return E==0?null:F.children[E-1]}}},nextSibling:function(){var F=this.parentNode;for(var E=0,D;D=F.children[E++];){if(D===this){return F.children[E]}}},replaceChild:function(G,F){if(this.children){if(G.parentNode){G.parentNode.removeChild(G)}for(var E=0,D;D=this.children[E];E++){if(D===F){this.children.splice(E,1,G);F.parentNode=null;G.parentNode=this;return G}}}},appendChild:function(F){if(this.type=="root"||(this.type=="element"&&!b.$empty[this.tagName])){if(!this.children){this.children=[]}if(F.parentNode){F.parentNode.removeChild(F)}for(var E=0,D;D=this.children[E];E++){if(D===F){this.children.splice(E,1);break}}this.children.push(F);F.parentNode=this;return F}},insertBefore:function(G,F){if(this.children){if(G.parentNode){G.parentNode.removeChild(G)}for(var E=0,D;D=this.children[E];E++){if(D===F){this.children.splice(E,0,G);G.parentNode=this;return G}}}},insertAfter:function(G,F){if(this.children){if(G.parentNode){G.parentNode.removeChild(G)}for(var E=0,D;D=this.children[E];E++){if(D===F){this.children.splice(E+1,0,G);G.parentNode=this;return G}}}},removeChild:function(H,I){if(this.children){for(var G=0,F;F=this.children[G];G++){if(F===H){this.children.splice(G,1);F.parentNode=null;if(I&&F.children&&F.children.length){for(var E=0,D;D=F.children[E];E++){this.children.splice(G+E,0,D);D.parentNode=this}}return F}}}},getAttr:function(D){return this.attrs&&this.attrs[D.toLowerCase()]},setAttr:function(F,E){if(!F){delete this.attrs;return}if(!this.attrs){this.attrs={}}if(p.isObject(F)){for(var D in F){if(!F[D]){delete this.attrs[D]}else{this.attrs[D.toLowerCase()]=F[D]}}}else{if(!E){delete this.attrs[F]}else{this.attrs[F.toLowerCase()]=E}}},getIndex:function(){var F=this.parentNode;for(var E=0,D;D=F.children[E];E++){if(D===this){return E}}return -1},getNodeById:function(G){var F;if(this.children&&this.children.length){for(var E=0,D;D=this.children[E++];){if(F=u(D,G)){return F}}}},getNodesByTagName:function(E){E=p.trim(E).replace(/[ ]{2,}/g," ").split(" ");var D=[],F=this;p.each(E,function(I){if(F.children&&F.children.length){for(var H=0,G;G=F.children[H++];){s(G,I,D)}}});return D},getStyle:function(E){var G=this.getAttr("style");if(!G){return""}var F=new RegExp("(^|;)\\s*"+E+":([^;]+)","i");var D=G.match(F);if(D&&D[0]){return D[2]}return""},setStyle:function(F,G){function E(I,K){var J=new RegExp("(^|;)\\s*"+I+":([^;]+;?)","gi");H=H.replace(J,"$1");if(K){H=I+":"+p.unhtml(K)+";"+H}}var H=this.getAttr("style");if(!H){H=""}if(p.isObject(F)){for(var D in F){E(D,F[D])}}else{E(F,G)}this.setAttr("style",p.trim(H))},traversal:function(D){if(this.children&&this.children.length){r(this,D)}return this}}})();var a=UM.htmlparser=function(t,G){var A=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,F=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g;var z={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};t=t.replace(new RegExp(f.fillChar,"g"),"");if(!G){t=t.replace(new RegExp("[\\r\\t\\n"+(G?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(G?"":" ")+"]*","g"),function(K,J){if(J&&z[J.toLowerCase()]){return K.replace(/(^[\n\r]+)|([\n\r]+$)/g,"")}return K.replace(new RegExp("^[\\r\\n"+(G?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(G?"":" ")+"]+$"),"")})}var u=UM.uNode,C={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},D={ol:"li",ul:"li"};function B(K,L){if(D[K.tagName]){var J=u.createElement(D[K.tagName]);K.appendChild(J);J.appendChild(u.createText(L));K=J}else{K.appendChild(u.createText(L))}}function v(O,K,P){var J;if(J=C[K]){var L=O,R;while(L.type!="root"){if(p.isArray(J)?p.indexOf(J,L.tagName)!=-1:J==L.tagName){O=L;R=true;break}L=L.parentNode}if(!R){O=v(O,p.isArray(J)?J[0]:J)}}var N=new u({parentNode:O,type:"element",tagName:K.toLowerCase(),children:b.$empty[K]?null:[]});if(P){var Q={},M;while(M=F.exec(P)){Q[M[1].toLowerCase()]=p.unhtml(M[2]||M[3]||M[4])}N.attrs=Q}O.children.push(N);return b.$empty[K]?O:N}function s(J,K){J.children.push(new u({type:"comment",data:K,parentNode:J}))}var x,r=0,y=0;var E=new u({type:"root",children:[]});var I=E;while(x=A.exec(t)){r=x.index;try{if(r>y){B(I,t.slice(y,r))}if(x[3]){if(b.$cdata[I.tagName]){B(I,x[0])}else{I=v(I,x[3].toLowerCase(),x[4])}}else{if(x[1]){if(I.type!="root"){if(b.$cdata[I.tagName]&&!b.$cdata[x[1]]){B(I,x[0])}else{var w=I;while(I.type=="element"&&I.tagName!=x[1].toLowerCase()){I=I.parentNode;if(I.type=="root"){I=w;throw"break"}}I=I.parentNode}}}else{if(x[2]){s(I,x[2])}}}}catch(H){}y=A.lastIndex}if(y<t.length){B(I,t.slice(y))}return E};var l=UM.filterNode=function(){function r(v,C){switch(v.type){case"text":break;case"element":var t;if(t=C[v.tagName]){if(t==="-"){v.parentNode.removeChild(v)}else{if(p.isFunction(t)){var y=v.parentNode,z=v.getIndex();t(v);if(v.parentNode){if(v.children){for(var w=0,D;D=v.children[w];){r(D,C);if(D.parentNode){w++}}}}else{for(var w=z,D;D=y.children[w];){r(D,C);if(D.parentNode){w++}}}}else{var B=t["$"];if(B&&v.attrs){var u={},s;for(var A in B){s=v.getAttr(A);if(A=="style"&&p.isArray(B[A])){var x=[];p.each(B[A],function(E){var F;if(F=v.getStyle(E)){x.push(E+":"+F)}});s=x.join(";")}if(s){u[A]=s}}v.attrs=u}if(v.children){for(var w=0,D;D=v.children[w];){r(D,C);if(D.parentNode){w++}}}}}}else{if(b.$cdata[v.tagName]){v.parentNode.removeChild(v)}else{var y=v.parentNode,z=v.getIndex();v.parentNode.removeChild(v,true);for(var w=z,D;D=y.children[w];){r(D,C);if(D.parentNode){w++}}}}break;case"comment":v.parentNode.removeChild(v)}}return function(s,w){if(p.isEmptyObject(w)){return s}var v;if(v=w["-"]){p.each(v.split(" "),function(x){w[x]="-"})}for(var u=0,t;t=s.children[u];){r(t,w);if(t.parentNode){u++}}return s}}();UM.commands.inserthtml={execCommand:function(s,x,E){var J=this,z,A;if(!x){return}if(J.fireEvent("beforeinserthtml",x)===true){return}z=J.selection.getRange();A=z.document.createElement("div");A.style.display="inline";if(!E){var F=UM.htmlparser(x);if(J.options.filterRules){UM.filterNode(F,J.options.filterRules)}J.filterInputRule(F);x=F.toHtml()}A.innerHTML=p.trim(x);if(!z.collapsed){var I=z.startContainer;if(f.isFillChar(I)){z.setStartBefore(I)}I=z.endContainer;if(f.isFillChar(I)){z.setEndAfter(I)}z.txtToElmBoundary();if(z.endContainer&&z.endContainer.nodeType==1){I=z.endContainer.childNodes[z.endOffset];if(I&&f.isBr(I)){z.setEndAfter(I)}}if(z.startOffset==0){I=z.startContainer;if(f.isBoundaryNode(I,"firstChild")){I=z.endContainer;if(z.endOffset==(I.nodeType==3?I.nodeValue.length:I.childNodes.length)&&f.isBoundaryNode(I,"lastChild")){J.body.innerHTML="<p>"+(j.ie?"":"<br/>")+"</p>";z.setStart(J.body.firstChild,0).collapse(true)}}}!z.collapsed&&z.deleteContents();if(z.startContainer.nodeType==1){var v=z.startContainer.childNodes[z.startOffset],B;if(v&&f.isBlockElm(v)&&(B=v.previousSibling)&&f.isBlockElm(B)){z.setEnd(B,B.childNodes.length).collapse();while(v.firstChild){B.appendChild(v.firstChild)}f.remove(v)}}}var v,w,B,H,u=0,r;if(z.inFillChar()){v=z.startContainer;if(f.isFillChar(v)){z.setStartBefore(v).collapse(true);f.remove(v)}else{if(f.isFillChar(v,true)){v.nodeValue=v.nodeValue.replace(q,"");z.startOffset--;z.collapsed&&z.collapse(true)}}}while(v=A.firstChild){if(u){var C=J.document.createElement("p");while(v&&(v.nodeType==3||!b.$block[v.tagName])){r=v.nextSibling;C.appendChild(v);v=r}if(C.firstChild){v=C}}z.insertNode(v);r=v.nextSibling;if(!u&&v.nodeType==f.NODE_ELEMENT&&f.isBlockElm(v)){w=f.findParent(v,function(K){return f.isBlockElm(K)});if(w&&w.tagName.toLowerCase()!="body"&&!(b[w.tagName][v.nodeName]&&v.parentNode===w)){if(!b[w.tagName][v.nodeName]){B=w}else{H=v.parentNode;while(H!==w){B=H;H=H.parentNode}}f.breakParent(v,B||H);var B=v.previousSibling;f.trimWhiteTextNode(B);if(!B.childNodes.length){f.remove(B)}if(!j.ie&&(D=v.nextSibling)&&f.isBlockElm(D)&&D.lastChild&&!f.isBr(D.lastChild)){D.appendChild(J.document.createElement("br"))}u=1}}var D=v.nextSibling;if(!A.firstChild&&D&&f.isBlockElm(D)){z.setStart(D,0).collapse(true);break}z.setEndAfter(v).collapse()}v=z.startContainer;if(r&&f.isBr(r)){f.remove(r)}if(f.isBlockElm(v)&&f.isEmptyNode(v)){if(r=v.nextSibling){f.remove(v);if(r.nodeType==1&&b.$block[r.tagName]){z.setStart(r,0).collapse(true).shrinkBoundary()}}else{try{v.innerHTML=j.ie?f.fillChar:"<br/>"}catch(G){z.setStartBefore(v);f.remove(v)}}}try{if(j.ie9below&&z.startContainer.nodeType==1&&!z.startContainer.childNodes[z.startOffset]){var t=z.startContainer,B=t.childNodes[z.startOffset-1];if(B&&B.nodeType==1&&b.$empty[B.tagName]){var y=this.document.createTextNode(f.fillChar);z.insertNode(y).setStart(y,0).collapse(true)}}z.select(true)}catch(G){}setTimeout(function(){z=J.selection.getRange();z.scrollIntoView();J.fireEvent("afterinserthtml")},200)}};UM.plugins.justify=function(){$.each("justifyleft justifyright justifycenter justifyfull".split(" "),function(s,r){UM.commands[r]={execCommand:function(t){return this.document.execCommand(t)},queryCommandValue:function(t){var u=this.document.queryCommandValue(t);return u===true||u==="true"?t.replace(/justify/,""):""},queryCommandState:function(t){return this.document.queryCommandState(t)?1:0}}})};UM.plugins.link=function(){this.setOpt("autourldetectinie",false);if(j.ie&&this.options.autourldetectinie===false){this.addListener("keyup",function(u,s){var t=this,w=s.keyCode;if(w==13||w==32){var r=t.selection.getRange();var x=r.startContainer;if(w==13){if(x.nodeName=="P"){var v=x.previousSibling;if(v&&v.nodeType==1){var v=v.lastChild;if(v&&v.nodeName=="A"&&!v.getAttribute("_href")){f.remove(v,true)}}}}else{if(w==32){if(x.nodeType==3&&/^\s$/.test(x.nodeValue)){x=x.previousSibling;if(x&&x.nodeName=="A"&&!x.getAttribute("_href")){f.remove(x,true)}}}}}})}this.addOutputRule(function(r){$.each(r.getNodesByTagName("a"),function(u,t){var s=p.html(t.getAttr("_href"));if(!/^(ftp|https?|\/|file)/.test(s)){s="http://"+s}t.setAttr("href",s);t.setAttr("_href");if(t.getAttr("title")==""){t.setAttr("title")}})});this.addInputRule(function(r){$.each(r.getNodesByTagName("a"),function(t,s){s.setAttr("_href",p.html(s.getAttr("href")))})});UM.commands.link={execCommand:function(s,t){var u=this;var r=u.selection.getRange();if(r.collapsed){var v=r.startContainer;if(v=f.findParentByTagName(v,"a",true)){$(v).attr(t);r.selectNode(v).select()}else{r.insertNode($("<a>"+t.href+"</a>").attr(t)[0]).select()}}else{u.document.execCommand("createlink",false,"_umeditor_link");p.each(f.getElementsByTagName(u.body,"a",function(w){return w.getAttribute("href")=="_umeditor_link"}),function(w){if($(w).text()=="_umeditor_link"){$(w).text(t.href)}f.setAttributes(w,t);r.selectNode(w).select()})}},queryCommandState:function(){return this.queryCommandValue("link")?1:0},queryCommandValue:function(){var s=this.selection.getStartElementPath();var r;$.each(s,function(t,u){if(u.nodeName=="A"){r=u;return false}});return r}};UM.commands.unlink={execCommand:function(){this.document.execCommand("unlink")}}};UM.plugins.list=function(){var r=this;r.setOpt({insertorderedlist:{decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:""}});this.addInputRule(function(s){p.each(s.getNodesByTagName("li"),function(t){if(t.children.length==0){t.parentNode.removeChild(t)}})});r.commands.insertorderedlist=r.commands.insertunorderedlist={execCommand:function(u){this.document.execCommand(u);var t=this.selection.getRange(),s=t.createBookmark(true);this.$body.find("ol,ul").each(function(v,x){var w=x.parentNode;if(w.tagName=="P"&&w.lastChild===w.firstChild){$(x).children().each(function(z,y){var A=w.cloneNode(false);$(A).append(y.innerHTML);$(y).html("").append(A)});$(x).insertBefore(w);$(w).remove()}});t.moveToBookmark(s).select();return true},queryCommandState:function(s){return this.document.queryCommandState(s)}}};(function(){var r={textarea:function(u,t){var s=t.ownerDocument.createElement("textarea");s.style.cssText="resize:none;border:0;padding:0;margin:0;overflow-y:auto;outline:0";if(j.ie&&j.version<8){s.style.width=t.offsetWidth+"px";s.style.height=t.offsetHeight+"px";t.onresize=function(){s.style.width=t.offsetWidth+"px";s.style.height=t.offsetHeight+"px"}}t.appendChild(s);return{container:s,setContent:function(v){s.value=v},getContent:function(){return s.value},select:function(){var v;if(j.ie){v=s.createTextRange();v.collapse(true);v.select()}else{s.setSelectionRange(0,0);s.focus()}},dispose:function(){t.removeChild(s);t.onresize=null;s=null;t=null}}}};UM.plugins.source=function(){var x=this;var s=this.options;var w=false;var z;s.sourceEditor="textarea";x.setOpt({sourceEditorFirst:false});function t(B){return r.textarea(x,B)}var A;var y=x.getContent,v;x.commands.source={execCommand:function(){w=!w;if(w){v=x.selection.getRange().createAddress(false,true);x.undoManger&&x.undoManger.save(true);if(j.gecko){x.body.contentEditable=false}x.body.style.cssText+=";position:absolute;left:-32768px;top:-32768px;";x.fireEvent("beforegetcontent");var C=UM.htmlparser(x.body.innerHTML);x.filterOutputRule(C);C.traversal(function(H){if(H.type=="element"){switch(H.tagName){case"td":case"th":case"caption":if(H.children&&H.children.length==1){if(H.firstChild().tagName=="br"){H.removeChild(H.firstChild())}}break;case"pre":H.innerText(H.innerText().replace(/&nbsp;/g," "))}}});x.fireEvent("aftergetcontent");var E=C.toHtml(true);z=t(x.body.parentNode);z.setContent(E);var D=function(H){return parseInt($(x.body).css(H))};$(z.container).width($(x.body).width()+D("padding-left")+D("padding-right")).height($(x.body).height());setTimeout(function(){z.select()});x.getContent=function(){return z.getContent()||"<p>"+(j.ie?"":"<br/>")+"</p>"}}else{x.$body.css({position:"",left:"",top:""});var B=z.getContent()||"<p>"+(j.ie?"":"<br/>")+"</p>";B=B.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(I,H){if(H&&!b.$inlineWithA[H.toLowerCase()]){return I.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,"")}return I.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")});x.setContent(B);z.dispose();z=null;x.getContent=y;var G=x.body.firstChild;if(!G){x.body.innerHTML="<p>"+(j.ie?"":"<br/>")+"</p>"}x.undoManger&&x.undoManger.save(true);if(j.gecko){x.body.contentEditable=true}try{x.selection.getRange().moveToAddress(v).select()}catch(F){}}this.fireEvent("sourcemodechanged",w)},queryCommandState:function(){return w|0},notNeedUndo:1};var u=x.queryCommandState;x.queryCommandState=function(B){B=B.toLowerCase();if(w){return B in {source:1,fullscreen:1}?u.apply(this,arguments):-1}return u.apply(this,arguments)}}})();UM.plugins.enterkey=function(){var s,t=this,r=t.options.enterTag;t.addListener("keyup",function(B,C){var D=C.keyCode||C.which;if(D==13){var A=t.selection.getRange(),x=A.startContainer,u;if(!j.ie){if(/h\d/i.test(s)){if(j.gecko){var z=f.findParentByTagName(x,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],true);if(!z){t.document.execCommand("formatBlock",false,"<p>");u=1}}else{if(x.nodeType==1){var y=t.document.createTextNode(""),v;A.insertNode(y);v=f.findParentByTagName(y,"div",true);if(v){var w=t.document.createElement("p");while(v.firstChild){w.appendChild(v.firstChild)}v.parentNode.insertBefore(w,v);f.remove(v);A.setStartBefore(y).setCursor();u=1}f.remove(y)}}if(t.undoManger&&u){t.undoManger.save()}}j.opera&&A.select()}else{t.fireEvent("saveScene",true,true)}}});t.addListener("keydown",function(y,w){var z=w.keyCode||w.which;if(z==13){if(t.fireEvent("beforeenterkeydown")){f.preventDefault(w);return}t.fireEvent("saveScene",true,true);s="";var x=t.selection.getRange();if(!x.collapsed){var B=x.startContainer,v=x.endContainer,u=f.findParentByTagName(B,"td",true),A=f.findParentByTagName(v,"td",true);if(u&&A&&u!==A||!u&&A||u&&!A){w.preventDefault?w.preventDefault():(w.returnValue=false);return}}if(r=="p"){if(!j.ie){B=f.findParentByTagName(x.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],true);if(!B&&!j.opera){t.document.execCommand("formatBlock",false,"<p>");if(j.gecko){x=t.selection.getRange();B=f.findParentByTagName(x.startContainer,"p",true);B&&f.removeDirtyAttr(B)}}else{s=B.tagName;B.tagName.toLowerCase()=="p"&&j.gecko&&f.removeDirtyAttr(B)}}}}})};UM.commands.preview={execCommand:function(){var r=window.open("","_blank",""),s=r.document;s.open();s.write("<html><head></head><body><div>"+this.getContent(null,null,true)+"</div></body></html>");s.close()},notNeedUndo:1};UM.plugins.basestyle=function(){var s=["bold","underline","superscript","subscript","italic","strikethrough"],r=this;r.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+shift+85",strikeThrough:"ctrl+shift+83"});r.addOutputRule(function(t){$.each(t.getNodesByTagName("b i u strike s"),function(u,v){switch(v.tagName){case"b":v.tagName="strong";break;case"i":v.tagName="em";break;case"u":v.tagName="span";v.setStyle("text-decoration","underline");break;case"s":case"strike":v.tagName="span";v.setStyle("text-decoration","line-through")}})});$.each(s,function(t,u){r.commands[u]={execCommand:function(w){var v=this.selection.getRange();if(v.collapsed&&this.queryCommandState(w)!=1){var x=this.document.createElement({bold:"strong",underline:"u",superscript:"sup",subscript:"sub",italic:"em",strikethrough:"strike"}[w]);v.insertNode(x).setStart(x,0).setCursor(false);return true}else{return this.document.execCommand(w)}},queryCommandState:function(w){if(j.gecko){return this.document.queryCommandState(w)}var x=this.selection.getStartElementPath(),v=false;$.each(x,function(y,z){switch(w){case"bold":if(z.nodeName=="STRONG"||z.nodeName=="B"){v=1;return false}break;case"underline":if(z.nodeName=="U"||z.nodeName=="SPAN"&&$(z).css("text-decoration")=="underline"){v=1;return false}break;case"superscript":if(z.nodeName=="SUP"){v=1;return false}break;case"subscript":if(z.nodeName=="SUB"){v=1;return false}break;case"italic":if(z.nodeName=="EM"||z.nodeName=="I"){v=1;return false}break;case"strikethrough":if(z.nodeName=="S"||z.nodeName=="STRIKE"||z.nodeName=="SPAN"&&$(z).css("text-decoration")=="line-through"){v=1;return false}break}});return v}}})};UM.plugins.keystrokes=function(){var r=this;var s=true;r.addListener("keydown",function(A,C){var D=C.keyCode||C.which,t=r.selection.getRange();if(!t.collapsed&&!(C.ctrlKey||C.shiftKey||C.altKey||C.metaKey)&&(D>=65&&D<=90||D>=48&&D<=57||D>=96&&D<=111||{13:1,8:1,46:1}[D])){var w=t.startContainer;if(f.isFillChar(w)){t.setStartBefore(w)}w=t.endContainer;if(f.isFillChar(w)){t.setEndAfter(w)}t.txtToElmBoundary();if(t.endContainer&&t.endContainer.nodeType==1){w=t.endContainer.childNodes[t.endOffset];if(w&&f.isBr(w)){t.setEndAfter(w)}}if(t.startOffset==0){w=t.startContainer;if(f.isBoundaryNode(w,"firstChild")){w=t.endContainer;if(t.endOffset==(w.nodeType==3?w.nodeValue.length:w.childNodes.length)&&f.isBoundaryNode(w,"lastChild")){r.fireEvent("saveScene");r.body.innerHTML="<p>"+(j.ie?"":"<br/>")+"</p>";t.setStart(r.body.firstChild,0).setCursor(false,true);r._selectionChange();return}}}}if(D==8){t=r.selection.getRange();s=t.collapsed;if(r.fireEvent("delkeydown",C)){return}var u,y;if(t.collapsed&&t.inFillChar()){u=t.startContainer;if(f.isFillChar(u)){t.setStartBefore(u).shrinkBoundary(true).collapse(true);f.remove(u)}else{u.nodeValue=u.nodeValue.replace(new RegExp("^"+f.fillChar),"");t.startOffset--;t.collapse(true).select(true)}}if(u=t.getClosedNode()){r.fireEvent("saveScene");t.setStartBefore(u);f.remove(u);t.setCursor();r.fireEvent("saveScene");f.preventDefault(C);return}if(!j.ie){u=f.findParentByTagName(t.startContainer,"table",true);y=f.findParentByTagName(t.endContainer,"table",true);if(u&&!y||!u&&y||u!==y){C.preventDefault();return}}u=t.startContainer;if(t.collapsed&&u.nodeType==1){var v=u.childNodes[t.startOffset-1];if(v&&v.nodeType==1&&v.tagName=="BR"){r.fireEvent("saveScene");t.setStartBefore(v).collapse(true);f.remove(v);t.select();r.fireEvent("saveScene")}}if(j.chrome){if(t.collapsed){while(t.startOffset==0&&!f.isEmptyBlock(t.startContainer)){t.setStartBefore(t.startContainer)}var x=t.startContainer.childNodes[t.startOffset-1];if(x&&x.nodeName=="BR"){t.setStartBefore(x);r.fireEvent("saveScene");$(x).remove();t.setCursor();r.fireEvent("saveScene")}}}}if(j.gecko&&D==46){var z=r.selection.getRange();if(z.collapsed){u=z.startContainer;if(f.isEmptyBlock(u)){var B=u.parentNode;while(f.getChildCount(B)==1&&!f.isBody(B)){u=B;B=B.parentNode}if(u===B.lastChild){C.preventDefault()}return}}}});r.addListener("keyup",function(y,A){var C=A.keyCode||A.which,t,x=this;if(C==8){if(x.fireEvent("delkeyup")){return}t=x.selection.getRange();if(t.collapsed){var u,B=["h1","h2","h3","h4","h5","h6"];if(u=f.findParentByTagName(t.startContainer,B,true)){if(f.isEmptyBlock(u)){var v=u.previousSibling;if(v&&v.nodeName!="TABLE"){f.remove(u);t.setStartAtLast(v).setCursor(false,true);return}else{var w=u.nextSibling;if(w&&w.nodeName!="TABLE"){f.remove(u);t.setStartAtFirst(w).setCursor(false,true);return}}}}if(f.isBody(t.startContainer)){var u=f.createElement(x.document,"p",{innerHTML:j.ie?f.fillChar:"<br/>"});t.insertNode(u).setStart(u,0).setCursor(false,true)}}if(!s&&(t.startContainer.nodeType==3||t.startContainer.nodeType==1&&f.isEmptyBlock(t.startContainer))){if(j.ie){var z=t.document.createElement("span");t.insertNode(z).setStartBefore(z).collapse(true);t.select();f.remove(z)}else{t.select()}}}})};UM.plugins.dropfile=function(){var r=this;r.setOpt("dropFileEnabled",true);if(r.getOpt("dropFileEnabled")&&window.FormData&&window.FileReader){r.addListener("ready",function(){r.$body.on("drop",function(u){try{var t=u.originalEvent.dataTransfer.files;var s=false;if(t){$.each(t,function(w,x){if(/^image/.test(x.type)){var y=new XMLHttpRequest();y.open("post",r.getOpt("imageUrl"),true);y.setRequestHeader("X-Requested-With","XMLHttpRequest");var v=new FormData();v.append(r.getOpt("imageFieldName")||"upfile",x);v.append("type","ajax");y.send(v);y.addEventListener("load",function(A){var z=r.getOpt("imagePath")+A.target.response;if(z){r.execCommand("insertimage",{src:z,_src:z})}});s=true}});if(s){u.preventDefault()}}}catch(u){}}).on("dragover",function(s){if(s.originalEvent.dataTransfer.types[0]=="Files"){s.preventDefault()}})})}};(function(x){x.parseTmpl=function y(C,B){var z="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+C.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(D,E){return"',"+E.replace(/\\'/g,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(D,E){return"');"+E.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var A=new Function("obj",z);return B?A(B):A};x.extend2=function(E,F){var B=arguments,G=x.type(B[B.length-1])=="boolean"?B[B.length-1]:false,A=x.type(B[B.length-1])=="boolean"?B.length-1:B.length;for(var D=1;D<A;D++){var z=B[D];for(var C in z){if(!G||!E.hasOwnProperty(C)){E[C]=z[C]}}}return E};x.IE6=!!window.ActiveXObject&&parseFloat(navigator.userAgent.match(/msie (\d+)/i)[1])==6;var v=[];var s=function(){};var r="edui";s.prototype={on:function(A,z){this.root().on(A,x.proxy(z,this));return this},off:function(A,z){this.root().off(A,x.proxy(z,this));return this},trigger:function(z,A){return this.root().trigger(z,A)===false?false:this},root:function(z){return this._$el||(this._$el=z)},destroy:function(){},data:function(z,A){if(A!==undefined){this.root().data(r+z,A);return this}else{return this.root().data(r+z)}},register:function(z,A,B){v.push({evtname:z,"$els":x.isArray(A)?A:[A],handler:x.proxy(B,A)})}};x.fn.edui=function(z){return z?this.data("eduiwidget",z):this.data("eduiwidget")};function u(D,A,C){D.prototype=x.extend2(x.extend({},A),(UM.ui[C]||s).prototype,true);D.prototype.supper=(UM.ui[C]||s).prototype;if(UM.ui[C]&&UM.ui[C].prototype.defaultOpt){var z=UM.ui[C].prototype.defaultOpt,B=D.prototype.defaultOpt;D.prototype.defaultOpt=x.extend({},z,B||{})}return D}var t=1;function w(A,z){x[r+z]=A;x.fn[r+z]=function(D){var B,C=Array.prototype.slice.call(arguments,1);this.each(function(E,F){var H=x(F);var G=H.edui();if(!G){A(!D||!x.isPlainObject(D)?{}:D,H);H.edui(G)}if(x.type(D)=="string"){if(D=="this"){B=G}else{B=G[D].apply(G,C);if(B!==G&&B!==undefined){return false}B=null}}});return B!==null?B:this}}UM.ui={define:function(A,z,C){var B=UM.ui[A]=u(function(D,E){var H=function(){};x.extend(H.prototype,B.prototype,{guid:A+t++,widgetName:A});var G=new H;if(x.type(D)=="string"){G.init&&G.init({});G.root().edui(G);G.root().find("a").click(function(I){I.preventDefault()});return G.root()[r+A].apply(G.root(),arguments)}else{E&&G.root(E);G.init&&G.init(!D||x.isPlainObject(D)?x.extend2(D||{},G.defaultOpt||{},true):D);try{G.root().find("a").click(function(I){I.preventDefault()})}catch(F){}return G.root().edui(G)}},z,C);w(B,A)}};x(function(){x(document).on("click mouseup mousedown dblclick mouseover",function(z){x.each(v,function(A,B){if(B.evtname==z.type){x.each(B.$els,function(D,C){if(C[0]!==z.target&&!x.contains(C[0],z.target)){B.handler(z)}})}})})})})(jQuery);UM.ui.define("button",{tpl:'<<%if(!texttype){%>div class="edui-btn edui-btn-<%=icon%> <%if(name){%>edui-btn-name-<%=name%><%}%>" unselectable="on" onmousedown="return false" <%}else{%>a class="edui-text-btn"<%}%><% if(title) {%> data-original-title="<%=title%>" <%};%>> <% if(icon) {%><div unselectable="on" class="edui-icon-<%=icon%> edui-icon"></div><% }; %><%if(text) {%><span unselectable="on" onmousedown="return false" class="edui-button-label"><%=text%></span><%}%><%if(caret && text){%><span class="edui-button-spacing"></span><%}%><% if(caret) {%><span unselectable="on" onmousedown="return false" class="edui-caret"></span><% };%></<%if(!texttype){%>div<%}else{%>a<%}%>>',defaultOpt:{text:"",title:"",icon:"",width:"",caret:false,texttype:false,click:function(){}},init:function(r){var s=this;s.root($($.parseTmpl(s.tpl,r))).click(function(t){s.wrapclick(r.click,t)});s.root().hover(function(){if(!s.root().hasClass("disabled")){s.root().toggleClass("hover")}});return s},wrapclick:function(s,r){if(!this.disabled()){this.root().trigger("wrapclick");$.proxy(s,this,r)()}return this},label:function(r){if(r===undefined){return this.root().find(".edui-button-label").text()}else{this.root().find(".edui-button-label").text(r);return this}},disabled:function(r){if(r===undefined){return this.root().hasClass("disabled")}this.root().toggleClass("disabled",r);if(this.root().hasClass("disabled")){this.root().removeClass("hover")}return this},active:function(r){if(r===undefined){return this.root().hasClass("active")}this.root().toggleClass("active",r);return this},mergeWith:function(s){var r=this;r.data("$mergeObj",s);s.edui().data("$mergeObj",r.root());if(!$.contains(document.body,s[0])){s.appendTo(r.root())}r.on("click",function(){r.wrapclick(function(){s.edui().show()})}).register("click",r.root(),function(t){s.hide()})}});(function(){UM.ui.define("toolbar",{tpl:'<div class="edui-toolbar"  ><div class="edui-btn-toolbar" unselectable="on" onmousedown="return false"  ></div></div>',init:function(){var r=this.root($(this.tpl));this.data("$btnToolbar",r.find(".edui-btn-toolbar"))},appendToBtnmenu:function(s){var r=this.data("$btnToolbar");s=$.isArray(s)?s:[s];$.each(s,function(u,t){r.append(t)})}})})();UM.ui.define("menu",{show:function(v,s,r,t,u){r=r||"position";if(this.trigger("beforeshow")===false){return}else{this.root().css($.extend({display:"block"},v?{top:v[r]().top+(s=="right"?0:v.outerHeight())-(t||0),left:v[r]().left+(s=="right"?v.outerWidth():0)-(u||0)}:{}));this.trigger("aftershow")}},hide:function(s){var r;if(this.trigger("beforehide")===false){return}else{if(r=this.root().data("parentmenu")){if(r.data("parentmenu")||s){r.edui().hide()}}this.root().css("display","none");this.trigger("afterhide")}},attachTo:function(s){var r=this;if(!s.data("$mergeObj")){s.data("$mergeObj",r.root());s.on("wrapclick",function(t){r.show()});r.register("click",s,function(t){r.hide()});r.data("$mergeObj",s)}}});UM.ui.define("dropmenu",{tmpl:'<ul class="edui-dropdown-menu" aria-labelledby="dropdownMenu" ><%for(var i=0,ci;ci=data[i++];){%><%if(ci.divider){%><li class="edui-divider"></li><%}else{%><li <%if(ci.active||ci.disabled){%>class="<%= ci.active|| \'\' %> <%=ci.disabled||\'\' %>" <%}%> data-value="<%= ci.value%>"><a href="#" tabindex="-1"><em class="edui-dropmenu-checkbox"><i class="edui-icon-ok"></i></em><%= ci.label%></a></li><%}%><%}%></ul>',defaultOpt:{data:[],click:function(){}},init:function(s){var t=this;var r={click:1,mouseover:1,mouseout:1};this.root($($.parseTmpl(this.tmpl,s))).on("click",'li[class!="disabled divider dropdown-submenu"]',function(u){$.proxy(s.click,t,u,$(this).data("value"),$(this))()}).find("li").each(function(u,v){var x=$(this);if(!x.hasClass("disabled divider dropdown-submenu")){var w=s.data[u];$.each(r,function(y){w[y]&&x[y](function(z){$.proxy(w[y],v)(z,w,t.root)})})}})},disabled:function(r){$("li[class!=divider]",this.root()).each(function(){var s=$(this);if(r===true){s.addClass("disabled")}else{if($.isFunction(r)){s.toggleClass("disabled",r(li))}else{s.removeClass("disabled")}}})},val:function(s){var r;$('li[class!="divider disabled dropdown-submenu"]',this.root()).each(function(){var t=$(this);if(s===undefined){if(t.find("em.edui-dropmenu-checked").length){r=t.data("value");return false}}else{t.find("em").toggleClass("edui-dropmenu-checked",t.data("value")==s)}});if(s===undefined){return r}},addSubmenu:function(u,v,t){t=t||0;var s=$("li[class!=divider]",this.root());var r=$('<li class="dropdown-submenu"><a tabindex="-1" href="#">'+u+"</a></li>").append(v);if(t>=0&&t<s.length){r.insertBefore(s[t])}else{if(t<0){r.insertBefore(s[0])}else{if(t>=s.length){r.appendTo(s)}}}}},"menu");UM.ui.define("splitbutton",{tpl:'<div class="edui-splitbutton <%if (name){%>edui-splitbutton-<%= name %><%}%>"  unselectable="on" <%if(title){%>data-original-title="<%=title%>"<%}%>><div class="edui-btn"  unselectable="on" ><%if(icon){%><div  unselectable="on" class="edui-icon-<%=icon%> edui-icon"></div><%}%><%if(text){%><%=text%><%}%></div><div  unselectable="on" class="edui-btn edui-dropdown-toggle" ><div  unselectable="on" class="edui-caret"></div></div></div>',defaultOpt:{text:"",title:"",click:function(){}},init:function(r){var s=this;s.root($($.parseTmpl(s.tpl,r)));s.root().find(".edui-btn:first").click(function(t){if(!s.disabled()){$.proxy(r.click,s)()}});s.root().find(".edui-dropdown-toggle").click(function(){if(!s.disabled()){s.trigger("arrowclick")}});s.root().hover(function(){if(!s.root().hasClass("disabled")){s.root().toggleClass("hover")}});return s},wrapclick:function(s,r){if(!this.disabled()){$.proxy(s,this,r)()}return this},disabled:function(r){if(r===undefined){return this.root().hasClass("disabled")}this.root().toggleClass("disabled",r).find(".edui-btn").toggleClass("disabled",r);return this},active:function(r){if(r===undefined){return this.root().hasClass("active")}this.root().toggleClass("active",r).find(".edui-btn:first").toggleClass("active",r);return this},mergeWith:function(s){var r=this;r.data("$mergeObj",s);s.edui().data("$mergeObj",r.root());if(!$.contains(document.body,s[0])){s.appendTo(r.root())}r.root().delegate(".edui-dropdown-toggle","click",function(){r.wrapclick(function(){s.edui().show()})});r.register("click",r.root().find(".edui-dropdown-toggle"),function(t){s.hide()})}});UM.ui.define("colorsplitbutton",{tpl:'<div class="edui-splitbutton <%if (name){%>edui-splitbutton-<%= name %><%}%>"  unselectable="on" <%if(title){%>data-original-title="<%=title%>"<%}%>><div class="edui-btn"  unselectable="on" ><%if(icon){%><div  unselectable="on" class="edui-icon-<%=icon%> edui-icon"></div><%}%><div class="edui-splitbutton-color-label" <%if (color) {%>style="background: <%=color%>"<%}%>></div><%if(text){%><%=text%><%}%></div><div  unselectable="on" class="edui-btn edui-dropdown-toggle" ><div  unselectable="on" class="edui-caret"></div></div></div>',defaultOpt:{color:""},init:function(r){var s=this;s.supper.init.call(s,r)},colorLabel:function(){return this.root().find(".edui-splitbutton-color-label")}},"splitbutton");UM.ui.define("popup",{tpl:'<div class="edui-dropdown-menu edui-popup"<%if(!<%=stopprop%>){%>onmousedown="return false"<%}%>><div class="edui-popup-body" unselectable="on" onmousedown="return false"><%=subtpl%></div><div class="edui-popup-caret"></div></div>',defaultOpt:{stopprop:false,subtpl:"",width:"",height:""},init:function(r){this.root($($.parseTmpl(this.tpl,r)));return this},mergeTpl:function(r){return $.parseTmpl(this.tpl,{subtpl:r})},show:function(t,s){if(!s){s={}}var r=s.fnname||"position";if(this.trigger("beforeshow")===false){return}else{this.root().css($.extend({display:"block"},t?{top:t[r]().top+(s.dir=="right"?0:t.outerHeight())-(s.offsetTop||0),left:t[r]().left+(s.dir=="right"?t.outerWidth():0)-(s.offsetLeft||0),position:"absolute"}:{}));this.root().find(".edui-popup-caret").css({top:s.caretTop||0,left:s.caretLeft||0,position:"absolute"}).addClass(s.caretDir||"up")}this.trigger("aftershow")},hide:function(){this.root().css("display","none");this.trigger("afterhide")},attachTo:function(t,s){var r=this;if(!t.data("$mergeObj")){t.data("$mergeObj",r.root());t.on("wrapclick",function(u){r.show(t,s)});r.register("click",t,function(u){r.hide()});r.data("$mergeObj",t)}},getBodyContainer:function(){return this.root().find(".edui-popup-body")}});UM.ui.define("scale",{tpl:'<div class="edui-scale" unselectable="on"><span class="edui-scale-hand0"></span><span class="edui-scale-hand1"></span><span class="edui-scale-hand2"></span><span class="edui-scale-hand3"></span><span class="edui-scale-hand4"></span><span class="edui-scale-hand5"></span><span class="edui-scale-hand6"></span><span class="edui-scale-hand7"></span></div>',defaultOpt:{$doc:$(document),$wrap:$(document)},init:function(r){if(r.$doc){this.defaultOpt.$doc=r.$doc}if(r.$wrap){this.defaultOpt.$wrap=r.$wrap}this.root($($.parseTmpl(this.tpl,r)));this.initStyle();this.startPos=this.prePos={x:0,y:0};this.dragId=-1;return this},initStyle:function(){p.cssRule("scale",".edui-scale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;}.edui-scale span{position:absolute;left:0;top:0;width:7px;height:7px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-scale .edui-scale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-scale .edui-scale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-scale .edui-scale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-scale .edui-scale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-scale .edui-scale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-scale .edui-scale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-scale .edui-scale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-scale .edui-scale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},_eventHandler:function(u){var t=this,v=t.defaultOpt.$doc;switch(u.type){case"mousedown":var s=u.target||u.srcElement,s;if(s.className.indexOf("edui-scale-hand")!=-1){t.dragId=s.className.slice(-1);t.startPos.x=t.prePos.x=u.clientX;t.startPos.y=t.prePos.y=u.clientY;v.bind("mousemove",$.proxy(t._eventHandler,t))}break;case"mousemove":if(t.dragId!=-1){t.updateContainerStyle(t.dragId,{x:u.clientX-t.prePos.x,y:u.clientY-t.prePos.y});t.prePos.x=u.clientX;t.prePos.y=u.clientY;t.updateTargetElement()}break;case"mouseup":if(t.dragId!=-1){t.dragId=-1;t.updateTargetElement();var r=t.data("$scaleTarget");if(r.parent()){t.attachTo(t.data("$scaleTarget"))}}v.unbind("mousemove",$.proxy(t._eventHandler,t));break;default:break}},updateTargetElement:function(){var s=this,t=s.root(),r=s.data("$scaleTarget");r.css({width:t.width(),height:t.height()});s.attachTo(r)},updateContainerStyle:function(s,w){var v=this,r=v.root(),t,u=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];if(u[s][0]!=0){t=parseInt(r.offset().left)+w.x;r.css("left",v._validScaledProp("left",t))}if(u[s][1]!=0){t=parseInt(r.offset().top)+w.y;r.css("top",v._validScaledProp("top",t))}if(u[s][2]!=0){t=r.width()+u[s][2]*w.x;r.css("width",v._validScaledProp("width",t))}if(u[s][3]!=0){t=r.height()+u[s][3]*w.y;r.css("height",v._validScaledProp("height",t))}},_validScaledProp:function(v,t){var u=this.root(),r=this.defaultOpt.$doc,s=function(y,x,w){return(y+x)>w?w-x:t};t=isNaN(t)?0:t;switch(v){case"left":return t<0?0:s(t,u.width(),r.width());case"top":return t<0?0:s(t,u.height(),r.height());case"width":return t<=0?1:s(t,u.offset().left,r.width());case"height":return t<=0?1:s(t,u.offset().top,r.height())}},show:function(s){var r=this;if(s){r.attachTo(s)}r.root().bind("mousedown",$.proxy(r._eventHandler,r));r.defaultOpt.$doc.bind("mouseup",$.proxy(r._eventHandler,r));r.root().show();r.trigger("aftershow")},hide:function(){var r=this;r.root().unbind("mousedown",$.proxy(r._eventHandler,r));r.defaultOpt.$doc.unbind("mouseup",$.proxy(r._eventHandler,r));r.root().hide();r.trigger("afterhide")},attachTo:function(w){var u=this,t=w.offset(),v=u.root(),r=u.defaultOpt.$wrap,s=r.offset();u.data("$scaleTarget",w);u.root().css({position:"absolute",width:w.width(),height:w.height(),left:t.left-s.left-parseInt(r.css("border-left-width"))-parseInt(v.css("border-left-width")),top:t.top-s.top-parseInt(r.css("border-top-width"))-parseInt(v.css("border-top-width"))})},getScaleTarget:function(){return this.data("$scaleTarget")[0]}});UM.ui.define("colorpicker",{tpl:function(t){var u=("ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,").split(",");var s='<div unselectable="on" onmousedown="return false" class="edui-colorpicker<%if (name){%> edui-colorpicker-<%=name%><%}%>" ><table unselectable="on" onmousedown="return false"><tr><td colspan="10">'+t.lang_themeColor+'</td> </tr><tr class="edui-colorpicker-firstrow" >';for(var r=0;r<u.length;r++){if(r&&r%10===0){s+="</tr>"+(r==60?'<tr><td colspan="10">'+t.lang_standardColor+"</td></tr>":"")+"<tr"+(r==60?' class="edui-colorpicker-firstrow"':"")+">"}s+=r<70?'<td><a unselectable="on" onmousedown="return false" title="'+u[r]+'" class="edui-colorpicker-colorcell" data-color="#'+u[r]+'" style="background-color:#'+u[r]+";border:solid #ccc;"+(r<10||r>=60?"border-width:1px;":r>=10&&r<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':""}s+="</tr></table></div>";return s},init:function(r){var s=this;s.root($($.parseTmpl(s.supper.mergeTpl(s.tpl(r)),r)));s.root().on("click",function(t){s.trigger("pickcolor",$(t.target).data("color"))})}},"popup");(function(){var t="combobox",v="edui-combobox-item",r="edui-combobox-item-hover",u="edui-combobox-checked-icon",s="edui-combobox-item-label";UM.ui.define(t,(function(){return{tpl:'<ul class="dropdown-menu edui-combobox-menu<%if (comboboxName!==\'\') {%> edui-combobox-<%=comboboxName%><%}%>" unselectable="on" onmousedown="return false" role="menu" aria-labelledby="dropdownMenu"><%if(autoRecord) {%><%for( var i=0, len = recordStack.length; i<len; i++ ) {%><%var index = recordStack[i];%><li class="<%=itemClassName%><%if( selected == index ) {%> edui-combobox-checked<%}%>" data-item-index="<%=index%>" unselectable="on" onmousedown="return false"><span class="edui-combobox-icon" unselectable="on" onmousedown="return false"></span><label class="<%=labelClassName%>" style="<%=itemStyles[ index ]%>" unselectable="on" onmousedown="return false"><%=items[index]%></label></li><%}%><%if( i ) {%><li class="edui-combobox-item-separator"></li><%}%><%}%><%for( var i=0, label; label = items[i]; i++ ) {%><li class="<%=itemClassName%><%if( selected == i ) {%> edui-combobox-checked<%}%> edui-combobox-item-<%=i%>" data-item-index="<%=i%>" unselectable="on" onmousedown="return false"><span class="edui-combobox-icon" unselectable="on" onmousedown="return false"></span><label class="<%=labelClassName%>" style="<%=itemStyles[ i ]%>" unselectable="on" onmousedown="return false"><%=label%></label></li><%}%></ul>',defaultOpt:{recordStack:[],items:[],value:[],comboboxName:"",selected:"",autoRecord:true,recordCount:5},init:function(w){var x=this;$.extend(x._optionAdaptation(w),x._createItemMapping(w.recordStack,w.items),{itemClassName:v,iconClass:u,labelClassName:s});this._transStack(w);x.root($($.parseTmpl(x.tpl,w)));this.data("options",w).initEvent()},initEvent:function(){var w=this;w.initSelectItem();this.initItemActive()},initSelectItem:function(){var x=this,w="."+s;x.root().delegate("."+v,"click",function(){var z=$(this),y=z.attr("data-item-index");x.trigger("comboboxselect",{index:y,label:z.find(w).text(),value:x.data("options").value[y]}).select(y);x.hide();return false})},initItemActive:function(){var w={mouseenter:"addClass",mouseleave:"removeClass"};if($.IE6){this.root().delegate("."+v,"mouseenter mouseleave",function(x){$(this)[w[x.type]](r)}).one("afterhide",function(){})}},select:function(x){var y=this.data("options").itemCount,w=this.data("options").autowidthitem;if(w&&!w.length){w=this.data("options").items}if(y==0){return null}if(x<0){x=y+x%y}else{if(x>=y){x=y-1}}this.trigger("changebefore",w[x]);this._update(x);this.trigger("changeafter",w[x]);return null},selectItemByLabel:function(x){var y=this.data("options").itemMapping,z=this,w=null;!$.isArray(x)&&(x=[x]);$.each(x,function(A,B){w=y[B];if(w!==undefined){z.select(w);return false}})},_transStack:function(x){var w=[],z=-1,y=-1;$.each(x.recordStack,function(A,B){z=x.itemMapping[B];if($.isNumeric(z)){w.push(z);if(B==x.selected){y=z}}});x.recordStack=w;x.selected=y;w=null},_optionAdaptation:function(x){if(!("itemStyles" in x)){x.itemStyles=[];for(var y=0,w=x.items.length;y<w;y++){x.itemStyles.push("")}}x.autowidthitem=x.autowidthitem||x.items;x.itemCount=x.items.length;return x},_createItemMapping:function(z,y){var x={},w={recordStack:[],mapping:{}};$.each(y,function(A,B){x[B]=A});w.itemMapping=x;$.each(z,function(A,B){if(x[B]!==undefined){w.recordStack.push(x[B]);w.mapping[B]=x[B]}});return w},_update:function(y){var x=this.data("options"),w=[],z=null;$.each(x.recordStack,function(A,B){if(B!=y){w.push(B)}});w.unshift(y);if(w.length>x.recordCount){w.length=x.recordCount}x.recordStack=w;x.selected=y;z=$($.parseTmpl(this.tpl,x));this.root().html(z.html());z=null;w=null}}})(),"menu")})();(function(){var r="buttoncombobox";UM.ui.define(r,(function(){return{defaultOpt:{label:"",title:""},init:function(s){var t=this;var u=$.eduibutton({caret:true,name:s.comboboxName,title:s.title,text:s.label,click:function(){t.show(this.root())}});t.supper.init.call(t,s);t.on("changebefore",function(w,v){u.eduibutton("label",v)});t.data("button",u);t.attachTo(u)},button:function(){return this.data("button")}}})(),"combobox")})();UM.ui.define("modal",{tpl:'<div class="edui-modal" tabindex="-1" ><div class="edui-modal-header"><div class="edui-close" data-hide="modal"></div><h3 class="edui-title"><%=title%></h3></div><div class="edui-modal-body"  style="<%if(width){%>width:<%=width%>px;<%}%><%if(height){%>height:<%=height%>px;<%}%>"> </div><% if(cancellabel || oklabel) {%><div class="edui-modal-footer"><div class="edui-modal-tip"></div><%if(oklabel){%><div class="edui-btn edui-btn-primary" data-ok="modal"><%=oklabel%></div><%}%><%if(cancellabel){%><div class="edui-btn" data-hide="modal"><%=cancellabel%></div><%}%></div><%}%></div>',defaultOpt:{title:"",cancellabel:"",oklabel:"",width:"",height:"",backdrop:true,keyboard:true},init:function(r){var s=this;s.root($($.parseTmpl(s.tpl,r||{})));s.data("options",r);if(r.okFn){s.on("ok",$.proxy(r.okFn,s))}if(r.cancelFn){s.on("beforehide",$.proxy(r.cancelFn,s))}s.root().delegate('[data-hide="modal"]',"click",$.proxy(s.hide,s)).delegate('[data-ok="modal"]',"click",$.proxy(s.ok,s));$('[data-hide="modal"],[data-ok="modal"]',s.root()).hover(function(){$(this).toggleClass("hover")})},toggle:function(){var r=this;return r[!r.data("isShown")?"show":"hide"]()},show:function(){var r=this;r.trigger("beforeshow");if(r.data("isShown")){return}r.data("isShown",true);r.escape();r.backdrop(function(){r.autoCenter();r.root().show().focus().trigger("aftershow")})},showTip:function(r){$(".edui-modal-tip",this.root()).html(r).fadeIn()},hideTip:function(r){$(".edui-modal-tip",this.root()).fadeOut(function(){$(this).html("")})},autoCenter:function(){!$.IE6&&this.root().css("margin-left",-(this.root().width()/2))},hide:function(){var r=this;r.trigger("beforehide");if(!r.data("isShown")){return}r.data("isShown",false);r.escape();r.hideModal()},escape:function(){var r=this;if(r.data("isShown")&&r.data("options").keyboard){r.root().on("keyup",function(s){s.which==27&&r.hide()})}else{if(!r.data("isShown")){r.root().off("keyup")}}},hideModal:function(){var r=this;r.root().hide();r.backdrop(function(){r.removeBackdrop();r.trigger("afterhide")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(s){var r=this;if(r.data("isShown")&&r.data("options").backdrop){r.$backdrop=$('<div class="edui-modal-backdrop" />').click(r.data("options").backdrop=="static"?$.proxy(r.root()[0].focus,r.root()[0]):$.proxy(r.hide,r))}r.trigger("afterbackdrop");s&&s()},attachTo:function(s){var r=this;if(!s.data("$mergeObj")){s.data("$mergeObj",r.root());s.on("click",function(){r.toggle(s)});r.data("$mergeObj",s)}},ok:function(){var r=this;r.trigger("beforeok");if(r.trigger("ok",r)===false){return}r.hide()},getBodyContainer:function(){return this.root().find(".edui-modal-body")}});UM.ui.define("tooltip",{tpl:'<div class="edui-tooltip" unselectable="on" onmousedown="return false"><div class="edui-tooltip-arrow" unselectable="on" onmousedown="return false"></div><div class="edui-tooltip-inner" unselectable="on" onmousedown="return false"></div></div>',init:function(r){var s=this;s.root($($.parseTmpl(s.tpl,r||{})))},content:function(s){var r=this,t=$(s.currentTarget).attr("data-original-title");r.root().find(".edui-tooltip-inner")["text"](t)},position:function(s){var r=this,t=$(s.currentTarget);r.root().css($.extend({display:"block"},t?{top:t.outerHeight(),left:((t.outerWidth()-r.root().outerWidth())/2)}:{}))},show:function(s){if($(s.currentTarget).hasClass("disabled")){return}var r=this;r.content(s);r.root().appendTo($(s.currentTarget));r.position(s);r.root().css("display","block").addClass("in bottom")},hide:function(){var r=this;r.root().removeClass("in bottom").css("display","none")},attachTo:function(t){var s=this;function r(v){var u=this;if(!$.contains(document.body,u.root()[0])){u.root().appendTo(v)}u.data("tooltip",u.root());v.each(function(){if($(this).attr("data-original-title")){$(this).on("mouseenter",$.proxy(u.show,u)).on("mouseleave click",$.proxy(u.hide,u))}})}if($.type(t)==="undefined"){$("[data-original-title]").each(function(u,v){r.call(s,$(v))})}else{if(!t.data("tooltip")){r.call(s,t)}}}});UM.ui.define("tab",{init:function(r){var t=this,s=r.selector;if($.type(s)){t.root($(s,r.context));t.data("context",r.context);$(s,t.data("context")).on("click",function(u){t.show(u)})}},show:function(y){var x=this,t=$(y.target),u=t.closest("ul"),s,w,r,y;s=t.attr("href");s=s&&s.replace(/.*(?=#[^\s]*$)/,"");var v=t.parent("li");if(!v.length||v.hasClass("active")){return}w=u.find(".active:last a")[0];y=$.Event("beforeshow",{target:t[0],relatedTarget:w});x.trigger(y);if(y.isDefaultPrevented()){return}r=$(s,x.data("context"));x.activate(t.parent("li"),u);x.activate(r,r.parent(),function(){x.trigger({type:"aftershow",relatedTarget:w})})},activate:function(t,s,u){if(t===undefined){return $(".edui-tab-item.active",this.root()).index()}var r=s.find("> .active");r.removeClass("active");t.addClass("active");u&&u()}});UM.ui.define("separator",{tpl:'<div class="edui-separator" unselectable="on" onmousedown="return false" ></div>',init:function(r){var s=this;s.root($($.parseTmpl(s.tpl,r)));return s}});(function(){var s={},u={},t=[],x=null,v={},w={},r={};p.extend(UM,{defaultWidth:500,defaultHeight:500,registerUI:function(y,z){p.each(y.split(/\s+/),function(A){s[A]=z})},setEditor:function(y){!u[y.id]&&(u[y.id]=y)},registerWidget:function(z,A,y){v[z]=$.extend2(A,{$root:"",_preventDefault:false,root:function(B){return this.$root||(this.$root=B)},preventDefault:function(){this._preventDefault=true},clear:false});if(y){w[z]=y}},getWidgetData:function(y){return v[y]},setWidgetBody:function(z,C,A){if(!A._widgetData){A._widgetData={};A.getWidgetData=function(D){return this._widgetData[D]};A.getWidgetCallback=function(D){return w[D]}}var B=v[z];if(!B){return null}B=A._widgetData[z];if(!B){B=v[z];B=A._widgetData[z]=$.type(B)=="function"?B:p.clone(B)}B.root(C.edui().getBodyContainer());B.initContent(A,C);if(!B._preventDefault){B.initEvent(A,C)}B.width&&C.width(B.width);var y=w[z];if(y&&!y.init){w[z]=function(){var D=Array.prototype.slice.call(arguments,0);y.apply(A,[A,C].concat(D))};w[z].init=true}},setActiveWidget:function(y){x=y},getEditor:function(z,y){return u[z]||(u[z]=this.createEditor(z,y))},clearCache:function(y){if(u[y]){delete u[y]}},delEditor:function(z){var y;if(y=u[z]){y.destroy()}},ready:function(y){t.push(y)},createEditor:function(C,z){var B=new UM.Editor(z);var y=this;B.langIsReady?$.proxy(A,y)():B.addListener("langReady",$.proxy(A,y));function A(){var E=this.createUI("#"+C,B);B.key=C;B.ready(function(){$.each(t,function(F,G){$.proxy(G,B)()})});var D=B.options;if(D.initialFrameWidth){D.minFrameWidth=D.initialFrameWidth}else{D.minFrameWidth=D.initialFrameWidth=B.$body.width()||UM.defaultWidth}E.css({width:D.initialFrameWidth,zIndex:B.getOpt("zIndex")});UM.browser.ie&&UM.browser.version===6&&document.execCommand("BackgroundImageCache",false,true);B.render(C);$.eduitooltip&&$.eduitooltip("attachTo").css("z-index",B.getOpt("zIndex")+1);E.find("a").click(function(F){F.preventDefault()});B.fireEvent("afteruiready")}return B},createUI:function(C,A){var z=$(C),B=$('<div class="edui-container"><div class="edui-editor-body"></div></div>').insertBefore(z);A.$container=B;A.container=B[0];A.$body=z;if(j.ie&&j.ie9above){var y=$('<span style="padding:0;margin:0;height:0;width:0"></span>');y.insertAfter(B)}$.each(s,function(F,D){var E=D.call(A,F);if(E){r[F]=E}});B.find(".edui-editor-body").append(z).before(this.createToolbar(A.options,A));B.find(".edui-toolbar").append($('<div class="edui-dialog-container"></div>'));return B},createToolbar:function(z,A){var y=$.eduitoolbar(),C=y.edui();if(z.toolbar&&z.toolbar.length){var B=[];$.each(z.toolbar,function(D,E){$.each(E.split(/\s+/),function(G,F){if(F=="|"){$.eduiseparator&&B.push($.eduiseparator())}else{var H=r[F];if(F=="fullscreen"){H&&B.unshift(H)}else{H&&B.push(H)}}});B.length&&C.appendToBtnmenu(B)})}else{y.find(".edui-btn-toolbar").remove()}return y}})})();UM.registerUI("bold italic underline strikethrough insertorderedlist insertunorderedlist link unlink image justifyleft justifycenter justifyright",function(r){var t=this;var s=$.eduibutton({icon:r,click:function(){t.execCommand(r)},title:this.getLang("labelMap")[r]||""});this.addListener("selectionchange",function(){var u=this.queryCommandState(r);s.edui().disabled(u==-1).active(u==1)});return s});(function(){var t={},w=["width","height","position","top","left","margin","padding","overflowX","overflowY"],r={},u={},v={},x={};UM.registerUI("fullscreen",function(y){var z=this,A=$.eduibutton({icon:"fullscreen",title:(z.options.labelMap&&z.options.labelMap[y])||z.getLang("labelMap."+y),click:function(){z.execCommand(y)}});z.addListener("selectionchange",function(){var B=this.queryCommandState(y);A.edui().disabled(B==-1).active(B==1)});z.addListener("ready",function(){z.options.fullscreen&&s.getInstance(z).toggle()});return A});UM.commands.fullscreen={execCommand:function(y){s.getInstance(this).toggle()},queryCommandState:function(y){return this._edui_fullscreen_status},notNeedUndo:1};function s(y){var z=this;if(!y){throw new Error("invalid params, notfound editor")}z.editor=y;x[y.uid]=this;y.addListener("destroy",function(){delete x[y.uid];z.editor=null})}s.prototype={toggle:function(){var z=this.editor,y=this.isFullState();z.fireEvent("beforefullscreenchange",!y);this.update(!y);!y?this.enlarge():this.revert();z.fireEvent("afterfullscreenchange",!y);if(z.body.contentEditable==="true"){z.fireEvent("fullscreenchanged",!y)}z.fireEvent("selectionchange")},enlarge:function(){this.saveSataus();this.setDocumentStatus();this.resize()},revert:function(){var z=this.editor.options,y=/%$/.test(z.initialFrameHeight)?"100%":(z.initialFrameHeight-this.getStyleValue("padding-top")-this.getStyleValue("padding-bottom")-this.getStyleValue("border-width"));$.IE6&&this.getEditorHolder().style.setExpression("height","this.scrollHeight <= "+y+' ? "'+y+'px" : "auto"');this.revertContainerStatus();this.revertContentAreaStatus();this.revertDocumentStatus()},update:function(y){this.editor._edui_fullscreen_status=y},resize:function(){var A=null,G=0,z=0,y=0,C=0,D=this.editor,E=this,B=null,F=null;if(!this.isFullState()){return}A=$(window);z=A.width();G=A.height();F=this.getEditorHolder();y=parseInt(f.getComputedStyle(F,"border-width"),10)||0;y+=parseInt(f.getComputedStyle(D.container,"border-width"),10)||0;C+=parseInt(f.getComputedStyle(F,"padding-left"),10)+parseInt(f.getComputedStyle(F,"padding-right"),10)||0;$.IE6&&F.style.setExpression("height",null);B=this.getBound();$(D.container).css({width:z+"px",height:G+"px",position:!$.IE6?"fixed":"absolute",top:B.top,left:B.left,margin:0,padding:0,overflowX:"hidden",overflowY:"hidden",zIndex:999});$(F).css({width:z-2*y-C+"px",height:G-2*y-(D.options.withoutToolbar?0:$(".edui-toolbar",D.container).outerHeight())-$(".edui-bottombar",D.container).outerHeight()+"px",overflowX:"hidden",overflowY:"auto"})},saveSataus:function(){var C=this.editor.container.style,B=null,z={};for(var A=0,y=w.length;A<y;A++){B=w[A];z[B]=C[B]}t[this.editor.uid]=z;this.saveContentAreaStatus();this.saveDocumentStatus()},saveContentAreaStatus:function(){var y=$(this.getEditorHolder());r[this.editor.uid]={width:y.css("width"),overflowX:y.css("overflowX"),overflowY:y.css("overflowY"),height:y.css("height")}},saveDocumentStatus:function(){var y=$(this.getEditorDocumentBody());u[this.editor.uid]={overflowX:y.css("overflowX"),overflowY:y.css("overflowY")};v[this.editor.uid]={overflowX:$(this.getEditorDocumentElement()).css("overflowX"),overflowY:$(this.getEditorDocumentElement()).css("overflowY")}},revertContainerStatus:function(){$(this.editor.container).css(this.getEditorStatus());$(this.editor.container).css({zIndex:90})},revertContentAreaStatus:function(){var y=this.getEditorHolder(),z=this.getContentAreaStatus();if(this.supportMin()){delete z.height;y.style.height=null}$(y).css(z)},revertDocumentStatus:function(){var y=this.getDocumentStatus();$(this.getEditorDocumentBody()).css("overflowX",y.body.overflowX);$(this.getEditorDocumentElement()).css("overflowY",y.html.overflowY)},setDocumentStatus:function(){$(this.getEditorDocumentBody()).css({overflowX:"hidden",overflowY:"hidden"});$(this.getEditorDocumentElement()).css({overflowX:"hidden",overflowY:"hidden"})},isFullState:function(){return !!this.editor._edui_fullscreen_status},getEditorStatus:function(){return t[this.editor.uid]},getContentAreaStatus:function(){return r[this.editor.uid]},getEditorDocumentElement:function(){return this.editor.container.ownerDocument.documentElement},getEditorDocumentBody:function(){return this.editor.container.ownerDocument.body},getEditorHolder:function(){return this.editor.body},getDocumentStatus:function(){return{body:u[this.editor.uid],html:v[this.editor.uid]}},supportMin:function(){var y=null;if(!this._support){y=document.createElement("div");this._support="minWidth" in y.style;y=null}return this._support},getBound:function(){var z={html:true,body:true},y={top:0,left:0},A=null;if(!$.IE6){return y}A=this.editor.container.offsetParent;if(A&&!z[A.nodeName.toLowerCase()]){z=A.getBoundingClientRect();y.top=-z.top;y.left=-z.left}return y},getStyleValue:function(y){return parseInt(f.getComputedStyle(this.getEditorHolder(),y))}};$.extend(s,{listen:function(){var y=null;if(s._hasFullscreenListener){return}s._hasFullscreenListener=true;$(window).on("resize",function(){if(y!==null){window.clearTimeout(y);y=null}y=window.setTimeout(function(){for(var z in x){x[z].resize()}y=null},50)})},getInstance:function(y){if(!x[y.uid]){new s(y)}return x[y.uid]}});s.listen()})();UM.registerUI("link",function(s){var v=this,r,w,y={insertvideo:"video"},x=y[s]||s,t={title:(v.options.labelMap&&v.options.labelMap[s])||v.getLang("labelMap."+s),url:v.options.UMEDITOR_HOME_URL+"dialogs/"+x+"/"+x+".js"};var u=$.eduibutton({icon:s,title:this.getLang("labelMap")[s]||""});p.loadFile(document,{src:t.url,tag:"script",type:"text/javascript",defer:"defer"},function(){var B=UM.getWidgetData(s);if(B.buttons){var z=B.buttons.ok;if(z){t.oklabel=z.label||v.getLang("ok");if(z.exec){t.okFn=function(){return $.proxy(z.exec,null,v,w)()}}}var A=B.buttons.cancel;if(A){t.cancellabel=A.label||v.getLang("cancel");if(A.exec){t.cancelFn=function(){return $.proxy(A.exec,null,v,w)()}}}}B.width&&(t.width=B.width);B.height&&(t.height=B.height);w=$.eduimodal(t);w.attr("id","edui-dialog-"+s).find(".edui-modal-body").addClass("edui-dialog-"+s+"-body");w.edui().on("beforehide",function(){var C=v.selection.getRange();if(C.equals(r)){C.select()}}).on("beforeshow",function(){var D=this.root(),C=null,E=null;r=v.selection.getRange();if(!D.parent()[0]){v.$container.find(".edui-dialog-container").append(D)}if($.IE6){C={width:$(window).width(),height:$(window).height()};E=D.parents(".edui-toolbar")[0].getBoundingClientRect();D.css({position:"absolute",margin:0,left:(C.width-D.width())/2-E.left,top:100-E.top})}UM.setWidgetBody(s,w,v)}).on("afterbackdrop",function(){this.$backdrop.css("zIndex",v.getOpt("zIndex")+1).appendTo(v.$container.find(".edui-dialog-container"));w.css("zIndex",v.getOpt("zIndex")+2)}).on("beforeok",function(){try{r.select()}catch(C){}}).attachTo(u)});v.addListener("selectionchange",function(){var z=this.queryCommandState(s);u.edui().disabled(z==-1).active(z==1)});return u});UM.registerUI("autofloat",function(){var t=this,u=t.getLang();t.setOpt({topOffset:0});var r=t.options.autoFloatEnabled!==false,s=t.options.topOffset;if(!r){return}t.ready(function(){var y=j.ie&&j.version<=6,A=j.quirks;function B(){if(!UM.ui){alert(u.autofloatMsg);return 0}return 1}function E(){var J=document.body.style;J.backgroundImage='url("about:blank")';J.backgroundAttachment="fixed"}var F,C=document.createElement("div"),D,w,I=function(J){var N;try{N=J.getBoundingClientRect()}catch(M){N={left:0,top:0,height:0,width:0}}var K={left:Math.round(N.left),top:Math.round(N.top),height:Math.round(N.bottom-N.top),width:Math.round(N.right-N.left)};var L;while((L=J.ownerDocument)!==document&&(J=f.getWindow(L).frameElement)){N=J.getBoundingClientRect();K.left+=N.left;K.top+=N.top}K.bottom=K.top+K.height;K.right=K.left+K.width;return K};var z=false;function H(){if(z){return}var K=f.getXY(D),J=f.getComputedStyle(D,"position"),L=f.getComputedStyle(D,"left");D.style.width=D.offsetWidth+"px";D.style.zIndex=t.options.zIndex*1+1;D.parentNode.insertBefore(C,D);if(y||(A&&j.ie)){if(D.style.position!="absolute"){D.style.position="absolute"}D.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-w+s+"px"}else{if(D.style.position!="fixed"){D.style.position="fixed";D.style.top=s+"px";((J=="absolute"||J=="relative")&&parseFloat(L))&&(D.style.left=K.x+"px")}}}function x(){if(C.parentNode){C.parentNode.removeChild(C)}D.style.cssText=F}function G(){var J=I(t.container);var K=t.options.toolbarTopOffset||0;if(J.top<0&&J.bottom-D.offsetHeight>K){H()}else{x()}}var v=p.defer(function(){G()},j.ie?200:100,true);t.addListener("destroy",function(){f.un(window,["scroll","resize"],G);t.removeListener("keydown",v)});if(B(t)){D=$(".edui-toolbar",t.container)[0];t.addListener("afteruiready",function(){setTimeout(function(){w=$(D).offset().top},100)});F=D.style.cssText;C.style.height=D.offsetHeight+"px";if(y){E()}f.on(window,["scroll","resize"],G);t.addListener("keydown",v);t.addListener("beforefullscreenchange",function(K,J){if(J){x();z=J}});t.addListener("fullscreenchanged",function(K,J){if(!J){G()}z=J});t.addListener("sourcemodechanged",function(K,J){setTimeout(function(){G()},0)});t.addListener("clearDoc",function(){setTimeout(function(){G()},0)})}})});UM.registerUI("paragraph fontfamily fontsize",function(r){var y=this,z=(y.options.labelMap&&y.options.labelMap[r])||y.getLang("labelMap."+r),A={label:z,title:z,comboboxName:r,items:y.options[r]||[],itemStyles:[],value:[],autowidthitem:[]},x=null,w=null;switch(r){case"paragraph":A=v(A);break;case"fontfamily":A=t(A);break;case"fontsize":A=s(A);break}x=$.eduibuttoncombobox(A).css("zIndex",y.getOpt("zIndex")+1);w=x.edui();w.on("comboboxselect",function(B,C){y.execCommand(r,C.value)}).on("beforeshow",function(){if(x.parent().length===0){x.appendTo(y.$container.find(".edui-dialog-container"))}});this.addListener("selectionchange",function(B){var D=this.queryCommandState(r),C=this.queryCommandValue(r);w.button().edui().disabled(D==-1).active(D==1);if(C){C=C.replace(/['"]/g,"").toLowerCase().split(/['|"]?\s*,\s*[\1]?/);w.selectItemByLabel(C)}});return w.button().addClass("edui-combobox");function u(E,C){var B=$("<span>").html(E).css({display:"inline",position:"absolute",top:-10000000,left:-100000}).appendTo(document.body),D=B.width();B.remove();B=null;if(D<50){return E}else{E=E.slice(0,C?-4:-1);if(!E.length){return"..."}return u(E+"...",true)}}function v(C){var B=[];for(var D in C.items){C.value.push(D);B.push(D);C.autowidthitem.push(u(D))}C.items=B;C.autoRecord=false;return C}function t(E){var D=null,C=[];for(var F=0,B=E.items.length;F<B;F++){D=E.items[F].val;C.push(D.split(/\s*,\s*/)[0]);E.itemStyles.push("font-family: "+D);E.value.push(D);E.autowidthitem.push(u(C[F]))}E.items=C;return E}function s(E){var D=null,C=[];E.itemStyles=[];E.value=[];for(var F=0,B=E.items.length;F<B;F++){D=E.items[F];C.push(D);E.itemStyles.push("font-size: "+D+"px")}E.value=E.items;E.items=C;E.autoRecord=false;return E}});UM.registerUI("forecolor backcolor",function(s){function r(){return f.getComputedStyle(w[0],"background-color")}var v=this,t=null,w=null,u=null;this.addListener("selectionchange",function(){var x=this.queryCommandState(s);u.edui().disabled(x==-1).active(x==1)});u=$.eduicolorsplitbutton({icon:s,caret:true,name:s,title:v.getLang("labelMap")[s],click:function(){v.execCommand(s,r())}});w=u.edui().colorLabel();t=$.eduicolorpicker({name:s,lang_clearColor:v.getLang("clearColor")||"",lang_themeColor:v.getLang("themeColor")||"",lang_standardColor:v.getLang("standardColor")||""}).on("pickcolor",function(x,y){window.setTimeout(function(){w.css("backgroundColor",y);v.execCommand(s,y)},0)}).on("show",function(){UM.setActiveWidget(colorPickerWidget.root())}).css("zIndex",v.getOpt("zIndex")+1);u.edui().on("arrowclick",function(){if(!t.parent().length){v.$container.find(".edui-dialog-container").append(t)}t.edui().show(u,{caretDir:"down",offsetTop:-5,offsetLeft:8,caretLeft:11,caretTop:-8})}).register("click",u,function(){t.edui().hide()});return u})})();